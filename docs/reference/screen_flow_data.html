<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate annual summary and missing data statistics for screening data — screen_flow_data • fasstr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate annual summary and missing data statistics for screening data — screen_flow_data"><meta property="og:description" content="Calculates means, medians, maximums, minimums, standard deviations of annual flows and data availability and missing 
   data statistics, and symbol counts (if column exists) for each year and month of each year. Calculates the statistics from all 
   daily discharge values from all years, unless specified. Returns a tibble with statistics."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fasstr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/index.html">All Articles</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/fasstr_users_guide.html">General Usage</a>
    </li>
    <li>
      <a href="../articles/fasstr_trending_analysis.html">Computing Annual Trends</a>
    </li>
    <li>
      <a href="../articles/fasstr_frequency_analysis.html">Computing Volume Frequency Analyses</a>
    </li>
    <li>
      <a href="../articles/fasstr_full_analysis.html">Computing a Full Analysis</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Exploration</li>
    <li>
      <a href="../articles/articles/fasstr_dataRetrieval.html">Using USGS dataRetrieval data with fasstr</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Under the Hood</li>
    <li>
      <a href="../articles/fasstr_under_the_hood.html">Internal Workflows</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bcgov/fasstr/raw/main/fasstr_cheatsheet.pdf" class="external-link">
    <span class="fa fa-file-download"></span>
     
    Download Cheatsheet
  </a>
</li>
<li>
  <a href="https://github.com/bcgov/fasstr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate annual summary and missing data statistics for screening data</h1>
    <small class="dont-index">Source: <a href="https://github.com/bcgov/fasstr/blob/HEAD/R/screen_flow_data.R" class="external-link"><code>R/screen_flow_data.R</code></a></small>
    <div class="hidden name"><code>screen_flow_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates means, medians, maximums, minimums, standard deviations of annual flows and data availability and missing 
   data statistics, and symbol counts (if column exists) for each year and month of each year. Calculates the statistics from all 
   daily discharge values from all years, unless specified. Returns a tibble with statistics.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">screen_flow_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dates <span class="op">=</span> <span class="va">Date</span>,</span>
<span>  values <span class="op">=</span> <span class="va">Value</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">STATION_NUMBER</span>,</span>
<span>  symbols <span class="op">=</span> <span class="st">"Symbol"</span>,</span>
<span>  <span class="va">station_number</span>,</span>
<span>  roll_days <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  roll_align <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>  water_year_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">start_year</span>,</span>
<span>  <span class="va">end_year</span>,</span>
<span>  months <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>,</span>
<span>  transpose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_symbols <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>Data frame of daily data that contains columns of dates, flow values, and (optional) groups (e.g. station numbers).
Leave blank or set to <code>NULL</code> if using <code>station_number</code> argument.</p></dd>


<dt>dates</dt>
<dd><p>Name of column in <code>data</code> that contains dates formatted YYYY-MM-DD. Only required if dates column name is not 
'Date' (default). Leave blank or set to <code>NULL</code> if using <code>station_number</code> argument.</p></dd>


<dt>values</dt>
<dd><p>Name of column in <code>data</code> that contains numeric flow values, in units of cubic metres per second.
Only required if values column name is not 'Value' (default). Leave blank if using <code>station_number</code> argument.</p></dd>


<dt>groups</dt>
<dd><p>Name of column in <code>data</code> that contains unique identifiers for different data sets, if applicable. Only required 
if groups column name is not 'STATION_NUMBER'. Function will automatically group by a column named 'STATION_NUMBER' if 
present. Remove the 'STATION_NUMBER' column beforehand to remove this grouping. Leave blank if using <code>station_number</code> 
argument.</p></dd>


<dt>symbols</dt>
<dd><p>Name of column in <code>data</code> that contains symbols. Only required if symbols column name is not 
'Symbol' (default). Leave blank or set to <code>NULL</code> if using <code>station_number</code> argument.</p></dd>


<dt>station_number</dt>
<dd><p>Character string vector of seven digit Water Survey of Canada station numbers (e.g. <code>"08NM116"</code>) of
which to extract daily streamflow data from a HYDAT database. Requires <code>tidyhydat</code> package and a HYDAT database.
Leave blank if using <code>data</code> argument.</p></dd>


<dt>roll_days</dt>
<dd><p>Numeric value of the number of days to apply a rolling mean. Default <code>1</code>.</p></dd>


<dt>roll_align</dt>
<dd><p>Character string identifying the direction of the rolling mean from the specified date, either by the first 
(<code>'left'</code>), last (<code>'right'</code>), or middle (<code>'center'</code>) day of the rolling n-day group of observations. 
Default <code>'right'</code>.</p></dd>


<dt>water_year_start</dt>
<dd><p>Numeric value indicating the month (<code>1</code> through <code>12</code>) of the start of water year for
analysis. Default <code>1</code>.</p></dd>


<dt>start_year</dt>
<dd><p>Numeric value of the first year to consider for analysis. Leave blank or set well before start date (i.e.
<code>1800</code>) to use from the first year of the source data.</p></dd>


<dt>end_year</dt>
<dd><p>Numeric value of the last year to consider for analysis. Leave blank or set well after end date (i.e.
<code>2100</code>) to use up to the last year of the source data.</p></dd>


<dt>months</dt>
<dd><p>Numeric vector of months to include in analysis. For example, <code>3</code> for March, <code>6:8</code> for Jun-Aug or 
<code>c(10:12,1)</code> for first four months (Oct-Jan) when <code>water_year_start = 10</code> (Oct). Default summarizes all 
months (<code>1:12</code>).</p></dd>


<dt>transpose</dt>
<dd><p>Logical value indicating whether to transpose rows and columns of results. Default <code>FALSE</code>.</p></dd>


<dt>include_symbols</dt>
<dd><p>Logical. Include columns of counts of symbol categories from the symbols column.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A tibble data frame with the following columns:</p>
<dl><dt>Year</dt>
<dd><p>calendar or water year selected</p></dd>

  <dt>n_days</dt>
<dd><p>number of days per year</p></dd>

  <dt>n_Q</dt>
<dd><p>number of days per year with flow data</p></dd>

  <dt>n_missing_Q</dt>
<dd><p>number of days per year with no flow data</p></dd>

  <dt>No_Symbol</dt>
<dd><p>number of days with no symbol category, if include_symbol=TRUE</p></dd>

  <dt>x_Symbol</dt>
<dd><p>number of days with a specific symbol category (x) from symbols column, if include_symbol=TRUE</p></dd>

  <dt>Maximum</dt>
<dd><p>annual maximum of all daily flows for a given year</p></dd>

  <dt>Mean</dt>
<dd><p>annual mean of all daily flows for a given year</p></dd>

  <dt>Median</dt>
<dd><p>annual median of all daily flows for a given year</p></dd>

  <dt>StandardDeviation</dt>
<dd><p>annual 1 standard deviation of all daily flows for a given year</p></dd>

</dl><p>and the following monthly missing columns (order will depend on water_year_month):</p>
<dl><dt>Jan_missing_Q</dt>
<dd><p>number of Jan days per year with no flow data</p></dd>

  <dt>Feb_missing_Q</dt>
<dd><p>number of Feb days per year with no flow data</p></dd>

  <dt>Mar_missing_Q</dt>
<dd><p>number of Mar days per year with no flow data</p></dd>

  <dt>Apr_missing_Q</dt>
<dd><p>number of Apr days per year with no flow data</p></dd>

  <dt>May_missing_Q</dt>
<dd><p>number of May days per year with no flow data</p></dd>

  <dt>Jun_missing_Q</dt>
<dd><p>number of Jun days per year with no flow data</p></dd>

  <dt>Jul_missing_Q</dt>
<dd><p>number of Jul days per year with no flow data</p></dd>

  <dt>Aug_missing_Q</dt>
<dd><p>number of Aug days per year with no flow data</p></dd>

  <dt>Sep_missing_Q</dt>
<dd><p>number of Sep days per year with no flow data</p></dd>

  <dt>Oct_missing_Q</dt>
<dd><p>number of Oct days per year with no flow data</p></dd>

  <dt>Nov_missing_Q</dt>
<dd><p>number of Nov days per year with no flow data</p></dd>

  <dt>Dec_missing_Q</dt>
<dd><p>number of Dec days per year with no flow data</p></dd>

</dl><p>Transposing data creates a column of "Statistics" and subsequent columns for each year selected.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Run if HYDAT database has been downloaded (using tidyhydat::download_hydat())</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_test_db.html" class="external-link">hy_downloaded_db</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate screening statistics using data frame and data argument with defaults</span></span></span>
<span class="r-in"><span><span class="va">flow_data</span> <span class="op">&lt;-</span> <span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_daily_flows.html" class="external-link">hy_daily_flows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">screen_flow_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">flow_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate screening statistics using station_number argument with defaults</span></span></span>
<span class="r-in"><span><span class="fu">screen_flow_data</span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                  </span></span>
<span class="r-in"><span><span class="co"># Calculate screening statistics for water years starting in October</span></span></span>
<span class="r-in"><span><span class="fu">screen_flow_data</span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span></span>
<span class="r-in"><span>                 water_year_start <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></span>
<span class="r-in"><span>                  </span></span>
<span class="r-in"><span><span class="co"># Calculate screening statistics for 7-day flows for July-September months only</span></span></span>
<span class="r-in"><span><span class="fu">screen_flow_data</span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span></span>
<span class="r-in"><span>                 roll_days <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                 months <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span></span>
<span class="r-in"><span>                 </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 73 × 16</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    STATION_NUMBER  Year n_days   n_Q n_missing_Q E_Symbol No_Symbol A_Symbol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 08NM116         <span style="text-decoration: underline;">1</span>949     92    92           0        5        87        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 08NM116         <span style="text-decoration: underline;">1</span>950     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 08NM116         <span style="text-decoration: underline;">1</span>951     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 08NM116         <span style="text-decoration: underline;">1</span>952     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 08NM116         <span style="text-decoration: underline;">1</span>953     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 08NM116         <span style="text-decoration: underline;">1</span>954     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 08NM116         <span style="text-decoration: underline;">1</span>955     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 08NM116         <span style="text-decoration: underline;">1</span>956     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 08NM116         <span style="text-decoration: underline;">1</span>957     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 08NM116         <span style="text-decoration: underline;">1</span>958     92    92           0        0        92        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 63 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 8 more variables: Minimum &lt;dbl&gt;, Maximum &lt;dbl&gt;, Mean &lt;dbl&gt;, Median &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   StandardDeviation &lt;dbl&gt;, Jul_missing_Q &lt;int&gt;, Aug_missing_Q &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Sep_missing_Q &lt;int&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jon Goetz, Carl James Schwarz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

