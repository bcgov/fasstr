<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fasstr Users Guide • fasstr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="fasstr Users Guide">
<meta property="og:description" content="fasstr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fasstr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">All Articles</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/fasstr_users_guide.html">General Usage</a>
    </li>
    <li>
      <a href="../articles/fasstr_trending_analysis.html">Computing Annual Trends</a>
    </li>
    <li>
      <a href="../articles/fasstr_frequency_analysis.html">Computing Volume Frequency Analyses</a>
    </li>
    <li>
      <a href="../articles/fasstr_full_analysis.html">Computing a Full Analysis</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Exploration</li>
    <li>
      <a href="../articles/articles/fasstr_dataRetrieval.html">Using USGS dataRetrieval data with fasstr</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Under the Hood</li>
    <li>
      <a href="../articles/fasstr_under_the_hood.html">Internal Workflows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bcgov/fasstr/raw/main/fasstr_cheatsheet.pdf" class="external-link">
    <span class="fa fa-file-download"></span>
     
    Download Cheatsheet
  </a>
</li>
<li>
  <a href="https://github.com/bcgov/fasstr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>fasstr Users Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bcgov/fasstr/blob/HEAD/vignettes/fasstr_users_guide.Rmd" class="external-link"><code>vignettes/fasstr_users_guide.Rmd</code></a></small>
      <div class="hidden name"><code>fasstr_users_guide.Rmd</code></div>

    </div>

    
    
<p><code>fasstr</code>, the Flow Analysis Summary Statistics Tool for R,
is a set of <a href="https://www.r-project.org/" class="external-link">R</a> functions to
tidy, summarize, analyze, trend, and visualize streamflow data. This
package summarizes continuous daily mean streamflow data into various
daily, monthly, annual, and long-term statistics, completes trending and
frequency analyses, with outputs in both table and plot formats.</p>
<p>This vignette documents the usage of the many functions and arguments
provided in <code>fasstr</code>. This vignette is a high-level adjunct
to the details found in the various function documentations (see
<code><a href="https://bcgov.github.io/fasstr/reference">help(package = "fasstr")</a></code> for documentation). You’ll learn
how to install the package and a HYDAT database, input data into
<code>fasstr</code> functions, add relevant columns and rows to daily
data, screen data for outliers and missing dates, calculate and
visualize various summary statistics, trend annual flows, and complete
volume frequency analyses.</p>
<p>A quick reference PDF cheat sheet is also available for
<code>fasstr</code> usage of functions and arguments. It can be
downloaded <a href="https://github.com/bcgov/fasstr/raw/main/fasstr_cheatsheet.pdf" class="external-link">here</a>.</p>
<p>This guide contains the following sections to help understand the
usage of the <code>fasstr</code> functions and arguments:</p>
<ol style="list-style-type: decimal">
<li>Getting Started</li>
<li>Flow Data Inputs</li>
<li>Function Outputs</li>
<li>Data Tidying (<code>fill_*</code> and <code>add_*</code>
functions)</li>
<li>Data Screening (<code>screen_*</code> functions)</li>
<li>Calculating Statistics (<code>calc_*</code> functions)</li>
<li>Analyses (<code>compute_*</code> functions)</li>
<li>Customizing Functions - Data filtering and options</li>
<li>Writing Tables and Plots (<code>write_*</code> functions)</li>
</ol>
<div class="section level2">
<h2 id="getting-started">1. Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installing-and-loading-fasstr">Installing and loading fasstr<a class="anchor" aria-label="anchor" href="#installing-and-loading-fasstr"></a>
</h3>
<p>You can install <code>fasstr</code> directly from <a href="https://cran.r-project.org/package=fasstr" class="external-link">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fasstr"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version from <a href="https://github.com/bcgov/fasstr" class="external-link">GitHub</a>, use the <a href="https://cran.r-project.org/package=remotes" class="external-link"><code>remotes</code></a>
package then the <code>fasstr</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"bcgov/fasstr"</span><span class="op">)</span></span></code></pre></div>
<p>Several other packages will be installed with <code>fasstr</code>.
These include <a href="https://CRAN.R-project.org/package=tidyhydat" class="external-link"><code>tidyhydat</code></a>
for downloading Water Survey of Canada hydrometric data, <a href="https://CRAN.R-project.org/package=zyp" class="external-link"><code>zyp</code></a> for
trending, <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link"><code>ggplot2</code></a>
for creating plots, and <a href="https://CRAN.R-project.org/package=tidyr" class="external-link"><code>tidyr</code></a>
and <a href="https://CRAN.R-project.org/package=dplyr" class="external-link"><code>dplyr</code></a>
for data wrangling and summarizing, amongst others.</p>
<p>To call <code>fasstr</code> functions you can either load the package
using the <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> function or access a specific function
using a double-colon (e.g. <code><a href="../reference/calc_daily_stats.html">fasstr::calc_daily_stats()</a></code>).
<code>fasstr</code> exports the pipe, <code>%&gt;%</code>, so it can be
used for tidy workflows.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bcgov.github.io/fasstr/">fasstr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="downloading-hydat">Downloading HYDAT<a class="anchor" aria-label="anchor" href="#downloading-hydat"></a>
</h3>
<p>To use the <code>station_number</code> argument of the
<code>fasstr</code> functions, you will need to download a <a href="https://www.canada.ca/en/environment-climate-change/services/water-overview/quantity/monitoring/survey/data-products-services/national-archive-hydat.html" class="external-link">Water
Survey of Canada HYDAT database</a> to your computer using the following
<code>tidyhydat</code> function. The function will save the database on
your computer and know where to find it each time you open R or RStudio.
Due to the size of the database, it will take several minutes to
download.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/download_hydat.html" class="external-link">download_hydat</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>As HYDAT is updated frequently you may want to periodically update it
yourself using the function above. You can check the local version using
the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_version.html" class="external-link">hy_version</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="flow-data-inputs">2. Flow Data Inputs<a class="anchor" aria-label="anchor" href="#flow-data-inputs"></a>
</h2>
<p>All functions in <code>fasstr</code> require a daily mean streamflow
data set from one or more hydrometric stations. Long-term and continuous
data sets are preferred for most analyses, but seasonal and partial data
can be used. Note that if partial data sets are used, <code>NA</code>‘s
may be produced for certain statistics. Please see the ’Handling Missing
Dates’ section in Section 8 for more information. Data is provided to
each function using one of the following arguments:</p>
<ul>
<li>
<code>data</code>, as a data frame of daily flow values, or</li>
<li>
<code>station_number</code>, as a list of Water Survey of Canada
HYDAT station numbers.</li>
</ul>
<div class="section level3">
<h3 id="data-and-dates-values-and-groups">
<code>data</code> (and <code>dates</code>, <code>values</code>, and
<code>groups</code>)<a class="anchor" aria-label="anchor" href="#data-and-dates-values-and-groups"></a>
</h3>
<p>Using the <code>data</code> option, a data frame of daily data
containing columns of dates (YYYY-MM-DD in date format), values (mean
daily discharge in cubic metres per second in numeric format), and,
optionally, grouping identifiers (character string of station names or
numbers) is called. By default, the functions will look for columns
identified as ‘Date’, ‘Value’, and ‘STATION_NUMBER’, respectively, to be
compatible with the HYDAT default columns. However, columns of different
names can be identified using the <code>dates</code>,
<code>values</code>, <code>groups</code> column arguments (ex.
<code>values = Yield_mm</code>). The values of these arguments are not
required to be surrounded by quotes; both <code>"Date"</code> and
<code>Date</code> will provide the appropriate column called “Date”. An
example where groupings other than station numbers could be used include
certain time periods of a study for a single station (before, during,
and after watershed experiment treatments or before and after the
construction of a dam, appropriately identified in a column). The
following is an example of an appropriate data frame with default column
names (STATION_NUMBER not required):</p>
<pre><code>  STATION_NUMBER       Date Value
1        08NM116 1949-04-01  1.13
2        08NM116 1949-04-02  1.53
3        08NM116 1949-04-03  2.07
4        08NM116 1949-04-04  2.07
5        08NM116 1949-04-05  2.21
6        08NM116 1949-04-06  2.21</code></pre>
<p>The following is an example <code>fasstr</code> function arguments if
your daily data data frame has the default columns names (no need to
list them):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">flow_data</span><span class="op">)</span></span></code></pre></div>
<p>The following is an example if your daily data data frame has
non-default columns names of “Stations”, “Dates”, and “Flows”:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">flow_data</span>,</span>
<span>                          dates <span class="op">=</span> <span class="va">Dates</span>,</span>
<span>                          values <span class="op">=</span> <span class="va">Flows</span>,</span>
<span>                          groups <span class="op">=</span> <span class="va">Stations</span><span class="op">)</span></span></code></pre></div>
<p>The <code>data</code> argument is listed first in the list of
arguments for each function, so flow data frames can be passed onto
<code>fasstr</code> functions using the pipe operator,
<code>%&gt;%</code>, without listing the data frame in a tidy
workflow.</p>
</div>
<div class="section level3">
<h3 id="station_number">
<code>station_number</code><a class="anchor" aria-label="anchor" href="#station_number"></a>
</h3>
<p>Alternatively, you can directly extract flow data directly from a
HYDAT database by listing station numbers in the
<code>station_number</code> argument while leaving the data arguments
blank. Data frames from HYDAT also include ‘Parameter’ and ‘Symbol’
columns. The following is an example of listing stations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>, <span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This package allows for multiple stations (or other groupings) to be
analyzed in many of the functions; provided they are identified using
the <code>groups</code> column argument (defaults to STATION_NUMBER). If
named grouping column doesn’t exist or is improperly named then all
values listed in the <code>values</code> column will be summarized.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="function-types-and-outputs">3. Function Types and Outputs<a class="anchor" aria-label="anchor" href="#function-types-and-outputs"></a>
</h2>
<p><code>fasstr</code> provides various functions to help in streamflow
analyses. They can be generally categorized into the following groups
(with more details in the sections below):</p>
<ul>
<li>data tidying (to prepare data for analyses; <code>add_*</code> and
<code>fill_*</code> functions),</li>
<li>data screening (to look for outliers and missing data;
<code>screen_*</code> functions),</li>
<li>calculating summary statistics (long-term, annual, monthly and daily
statistics; <code>calc_*</code>functions),</li>
<li>computing analyses (volume frequency analyses and trending;
<code>compute_*</code> functions),</li>
<li>visualizing data (plotting the various statistics;
<code>plot_*</code> functions), and</li>
<li>writing data (to save your data and plots; <code>write_*</code>
functions)</li>
</ul>
<div class="section level3">
<h3 id="tibble-data-frames">Tibble Data Frames<a class="anchor" aria-label="anchor" href="#tibble-data-frames"></a>
</h3>
<p>Functions that produce tables create them as tibble data frames. To
facilitate the writing of the <code>fasstr</code> tibbles to a directory
as .csv, .xls, or .xlsx files with some functionality of rounding
digits, the <code><a href="../reference/write_results.html">write_results()</a></code> function can be used (see
section 9 for more information).</p>
</div>
<div class="section level3">
<h3 id="ggplot2-plots">
<code>ggplot2</code> Plots<a class="anchor" aria-label="anchor" href="#ggplot2-plots"></a>
</h3>
<p>Functions that produce plots create them as lists of
<code>ggplot2</code> objects. The use of <code>ggplot2</code> plots
allows for further customization of plots for the user (axis titles,
colours, etc.). All plotting functions produce lists to be consistent
with table naming conventions of <code>fasstr</code>, allow multiple
plots to be created with one function, and to easily allow the saving of
multiple plots to a directory. To assist with the saving of lists of
plots, a provided function called <code><a href="../reference/write_plots.html">write_plots()</a></code> will
directly save the list of plots within a directory or single PDF
document, with the <code>fasstr</code> plot objects names (see section 9
for more information). Individual plots can be subsetted from their
lists using either the dollar sign, $
(e.g. <code>one_plot &lt;- plots$plotname</code>), or double square
brackets, [ ] (e.g. <code>one_plot &lt;- plots[[plotname]]</code> or
<code>one_plot &lt;- plots[[1]]</code>).</p>
<p>Some functions produce both tibbles and plots as lists and can be
subsequently subsetted as desired.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="data-tidying-functions">4. Data Tidying Functions<a class="anchor" aria-label="anchor" href="#data-tidying-functions"></a>
</h2>
<p>There are several functions that are used to prepare your flow data
set for your own analysis. These functions begin with <code>add_</code>
or <code>fill_</code> and add columns or rows, respectively, to your
flow data frame. These functions include:</p>
<ul>
<li>
<code><a href="../reference/fill_missing_dates.html">fill_missing_dates()</a></code> - fills in missing dates or dates
with no flow values with NA</li>
<li>
<code><a href="../reference/add_date_variables.html">add_date_variables()</a></code> - add year, month, and day of year
variables (and water years if selected)</li>
<li>
<code><a href="../reference/add_seasons.html">add_seasons()</a></code> - add a column of seasons</li>
<li>
<code><a href="../reference/add_rolling_means.html">add_rolling_means()</a></code> - add rolling n-day averages
(e.g. 7-day rolling average)</li>
<li>
<code><a href="../reference/add_basin_area.html">add_basin_area()</a></code> - add a basin area column to daily
flows</li>
<li>
<code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> - add daily volumetric flows (in
cubic metres)</li>
<li>
<code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code> - add daily water yields (in
millimetres)</li>
<li>
<code><a href="../reference/add_cumulative_volume.html">add_cumulative_volume()</a></code> - add daily cumulative
volumetric flows on an annual basis (in cubic metres)</li>
<li>
<code><a href="../reference/add_cumulative_yield.html">add_cumulative_yield()</a></code> - add daily cumulative water
yields on an annual basis (in millimetres)</li>
</ul>
<p>The functions are set up to easily incorporate the use of the pipe
operator:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08HA011"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_rolling_means.html">add_rolling_means</a></span><span class="op">(</span>roll_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER       Date Parameter Value Symbol CalendarYear Month MonthName
1        08HA011 1960-01-01      Flow  62.9      E         1960     1       Jan
2        08HA011 1960-01-02      Flow  58.0      E         1960     1       Jan
3        08HA011 1960-01-03      Flow  54.9      E         1960     1       Jan
4        08HA011 1960-01-04      Flow  51.3      E         1960     1       Jan
5        08HA011 1960-01-05      Flow  47.3   &lt;NA&gt;         1960     1       Jan
6        08HA011 1960-01-06      Flow  46.7   &lt;NA&gt;         1960     1       Jan
  WaterYear DayofYear Q7Day
1      1960         1    NA
2      1960         2    NA
3      1960         3    NA
4      1960         4    NA
5      1960         5    NA
6      1960         6    NA</code></pre>
<div class="section level3">
<h3 id="filling-missing-dates">Filling missing dates<a class="anchor" aria-label="anchor" href="#filling-missing-dates"></a>
</h3>
<p>To ensure that analyses do not skip over dates, the
<code><a href="../reference/fill_missing_dates.html">fill_missing_dates()</a></code> function looks for gaps in dates and
adds the dates and fills in the flow values with <code>NA</code>. It
does not do any gap filling (linear or correlations, for example), it
assigns missing flow values with <code>NA</code>. It also fills dates to
create complete start and end years. For example, if data starts in
April, all flow values starting from January will be filled with
<code>NA</code>. The timing of the year depends on the
<code>water_year_start</code> argument. When
<code>water_year_start</code> is left blank, it will fill to complete
calendar years (Jan-Dec). If <code>water_year_start</code> is set to
another month (numeric) then it will fill to complete water years of the
desired year.</p>
<p>Run and compare the following lines to see how missing dates are
filled:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Very gappy (early years):</span></span>
<span><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_daily_flows.html" class="external-link">hy_daily_flows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gap filled with NA's</span></span>
<span><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_daily_flows.html" class="external-link">hy_daily_flows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It is ideal to fill missing dates before using other
<code>add_*</code> functions so dates added are not missing the other
new date values.</p>
</div>
<div class="section level3">
<h3 id="adding-date-variables-and-seasons">Adding date variables and seasons<a class="anchor" aria-label="anchor" href="#adding-date-variables-and-seasons"></a>
</h3>
<p>The <code><a href="../reference/add_date_variables.html">add_date_variables()</a></code> function adds useful dates
columns for summarizing data. The function defaults include
‘CalendarYear’, ‘Month’ (numeric), ‘MonthName’ (month abbreviation;
e.g. Jan), ‘WaterYear’ (year based on selected
<code>water_year_start</code>), and ‘DayofYear’ (the day of year based
on selected <code>water_year_start</code> from 1-365). The month of the
start of the water year is chosen using the
<code>water_year_start</code> argument, which defaults to “1” for
January.</p>
<p>Run and compare the following lines to see how the date columns are
added:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Just calendar year info</span></span>
<span><span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If water years are required starting August (use month number)</span></span>
<span><span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                   water_year_start <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/add_seasons.html">add_seasons()</a></code> function adds a column of seasons
identifiers called “Season”. The length of seasons, in months, is
provided using the <code>seasons_length</code> argument. As seasons are
grouped by months the length of the seasons must be divisible into 12
with season lengths of 1, 2, 3, 4, 6, or 12 months. The start of the
first season coincides with the start month of each year; ‘Jan-Jun’ for
6-month seasons starting with calendar years or ‘Dec-Feb’ for 3-month
seasons starting with water year starting in December. Run and compare
the following lines to see how seasons columns are added:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  2 seasons starting January</span></span>
<span><span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>            seasons_length <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#  4 seasons starting October</span></span>
<span><span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>            water_year_start <span class="op">=</span> <span class="fl">10</span>,</span>
<span>            seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#  4 Seasons starting December</span></span>
<span><span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>            water_year_start <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-rolling-means">Adding rolling means<a class="anchor" aria-label="anchor" href="#adding-rolling-means"></a>
</h3>
<p>Adding rolling means (running means or averages) of daily data, can
be done using the <code><a href="../reference/add_rolling_means.html">add_rolling_means()</a></code> functions. Based on
the selected “n” rolling days using the <code>roll_days</code> argument,
a column for each “n” will be added. One rolling mean column can be
added by listing one number (e.g. <code>roll_days = 7</code>) or
multiple columns can be added by listing each one
(e.g. <code>roll_days = c(3,7,30)</code>). Each column will be named
“Q’n’Day” where n is the number (e.g. Q7Day or Q30Day).</p>
<p>Where the alignment of the rolling mean is compared to the date is
important to know when analyzing data. The alignment, using the
<code>roll_align</code> argument, determine the date at which the
rolling means occur.</p>
<ul>
<li>
<code>roll_align = "right"</code> - the date will have the mean of
that date’s flow value and the previous n-1 days</li>
<li>
<code>roll_align = "left"</code> - the date will have the mean of
that date’s flow value and the next n-1 days</li>
<li><code>roll_align = "center"</code></li>
<li>odd numbered <code>roll_days</code> - date will have the mean of
that date’s flow value and half of n-1 days before and half of n-1 days
after</li>
<li>even numbered <code>roll_days</code> - date will have the mean of
that date’s flow and half of n days after, and the remaining before
((n/2)-1 days before the date) (i.e. the first of the middle two
dates)</li>
</ul>
<p>Odd roll_days example (column headers have alignment direction
added):</p>
<pre><code>        Date Value Q5Day_left Q5Day_center Q5Day_right
1 1960-01-01  62.9      54.88           NA          NA
2 1960-01-02  58.0      51.64           NA          NA
3 1960-01-03  54.9      48.82        54.88          NA
4 1960-01-04  51.3      46.22        51.64          NA
5 1960-01-05  47.3      44.12        48.82       54.88
6 1960-01-06  46.7      42.36        46.22       51.64</code></pre>
<p>Even roll_days example:</p>
<pre><code>        Date Value Q6Day_left Q6Day_center Q6Day_right
1 1960-01-01  62.9   53.51667           NA          NA
2 1960-01-02  58.0   50.35000           NA          NA
3 1960-01-03  54.9   47.66667     53.51667          NA
4 1960-01-04  51.3   45.31667     50.35000          NA
5 1960-01-05  47.3   43.18333     47.66667          NA
6 1960-01-06  46.7   41.53333     45.31667    53.51667</code></pre>
</div>
<div class="section level3">
<h3 id="adding-basin-areas">Adding basin areas<a class="anchor" aria-label="anchor" href="#adding-basin-areas"></a>
</h3>
<p>To add a column of basin areas, for viewing or analyzing, the
<code><a href="../reference/add_basin_area.html">add_basin_area()</a></code> function can be used. The basin area will
be extracted from HYDAT, if available, under two conditions where the
<code>basin_area</code> argument can be left blank:</p>
<ul>
<li>if the <code>station_number</code> argument is used</li>
<li>if your <code>data</code> data frame has a grouping column
consisting of HYDAT station numbers</li>
</ul>
<p>If you would like to apply your own basin area size(s) or override
the HYDAT areas, you use the <code>basin_area</code> argument in the
following ways:</p>
<ul>
<li>for a single station or applying to all stations, list a single
number (i.e. <code>basin_area = 800</code>)</li>
<li>for different areas for multiple stations, you list each basin area
for each station
(i.e. <code>basin_area = c("08NM116" = 800, "08NM242" = 4)</code>)</li>
</ul>
<p>Run and compare the following lines to see how basin area columns are
added:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using the station_number argument or data frame as HYDAT groupings</span></span>
<span><span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using the basin_area argument</span></span>
<span><span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>               basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using the basin_area argument with multiple stations</span></span>
<span><span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span>, </span>
<span>               basin_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM116"</span> <span class="op">=</span> <span class="fl">800</span>, <span class="st">"08NM242"</span> <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-daily-volumetric-discharge-or-water-yields">Adding daily volumetric discharge or water yields<a class="anchor" aria-label="anchor" href="#adding-daily-volumetric-discharge-or-water-yields"></a>
</h3>
<p>Converting daily mean discharge into other units can be useful for
different analyses. Columns of total daily discharge converted from
daily mean into volumetric flows, named “Volume_m3” in cubic metres per
second, or area-based water yields, named “Yield_mm” in millimetres, can
be used using the <code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> and
<code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code> functions, respectively. Volumetric gives
the total volume per day, and the water yield gives the total water
depth, provided an upstream drainage basin area is provided. Basin area
can be provided using the <code>basin_area</code> argument, or if there
is a <code>groups</code> column of HYDAT station numbers in your data
then it will automatically be extracted from HYDAT, if available. (see
`adding basin areas above or section 8 for more information).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a column of converted discharge (m3/s) into volume (m3)</span></span>
<span><span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>    </span>
<span></span>
<span><span class="co"># Add a column of converted discharge (m3/s) into yield (mm), with HYDAT station groups</span></span>
<span><span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>   </span>
<span></span>
<span><span class="co"># Add a column of converted discharge (m3/s) into yield (mm), with setting the basin area</span></span>
<span><span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>   </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-annual-cumulative-daily-volumetric-flows-or-water-yields">Adding annual cumulative daily volumetric flows or water yields<a class="anchor" aria-label="anchor" href="#adding-annual-cumulative-daily-volumetric-flows-or-water-yields"></a>
</h3>
<p>These functions create a rolling cumulative of daily total flows on
an annual basis, as volumetric flows, named “Cumul_Volume_m3” in cubic
metres per second, or area-based water yields, named “Cumul_Yield_mm” in
millimetres. A total flow for a given a day is the sum of all previous
days and that day, within a given year (Jan 15 cumulative flow value is
the sum of all total flows from Jan 1-15). It restarts for each year
(based on the starting month) and no values for a year are calculated if
there is missing data for a given year as the total for a given year
cannot be determined.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a column of cumulative volumes (m3)</span></span>
<span><span class="fu"><a href="../reference/add_cumulative_volume.html">add_cumulative_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Add a column of cumulative yield (mm), with HYDAT station number groups</span></span>
<span><span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>   </span>
<span></span>
<span><span class="co"># Add a column of cumulative yield (mm), with setting the basin area</span></span>
<span><span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                     basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>  </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pipelines">Pipelines<a class="anchor" aria-label="anchor" href="#pipelines"></a>
</h3>
<p>By utilizing the <code>data</code> argument as the first one list, it
enables the user to work with the tidying functions within a tidy
‘pipeline’ and can pass onto the other <code>fasstr</code>
functions.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>water_year_start <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_rolling_means.html">add_rolling_means</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_cumulative_volume.html">add_cumulative_volume</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="data-screening-functions">5. Data Screening Functions<a class="anchor" aria-label="anchor" href="#data-screening-functions"></a>
</h2>
<p>If you are looking at some data for the first time, it may be useful
to explore the data quality and availability. The following functions
will help to explore the data:</p>
<ul>
<li>
<code><a href="../reference/plot_flow_data.html">plot_flow_data()</a></code> - plot daily mean streamflow</li>
<li>
<code><a href="../reference/plot_flow_data_symbols.html">plot_flow_data_symbols()</a></code> - plot daily mean streamflow
with their symbols</li>
<li>
<code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> - calculate annual summary and
identify missing data</li>
<li>
<code><a href="../reference/plot_data_screening.html">plot_data_screening()</a></code> - plot annual summary statistics
for data screening</li>
<li>
<code><a href="../reference/plot_missing_dates.html">plot_missing_dates()</a></code> - plot annual and monthly missing
dates</li>
<li>
<code><a href="../reference/plot_annual_symbols.html">plot_annual_symbols()</a></code> - plot annual counts of
symbols</li>
</ul>
<p>To view the entire daily flow data set to view for gaps and outliers,
or changes in flow over time, the <code><a href="../reference/plot_flow_data.html">plot_flow_data()</a></code> function
will plot all daily data in the data frame. The plot can be filtered by
years and dates.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_flow_data.html">plot_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-18-1.png" width="672"></p>
<p>When plotting multiple stations, they automatically produce a
separate plot for each station. However, setting
<code>one_plot = TRUE</code> will plot all stations on the same
plot.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_flow_data.html">plot_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM241"</span>, <span class="st">"08NM242"</span><span class="op">)</span>,</span>
<span>               one_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<p>To view a flow time series data quality from their provided HYDAT
symbols (qualifer symbols like E for estimate, B for under ice etc.), or
custom symbols/categories from a column called “Symbol”, the
<code><a href="../reference/plot_flow_data.html">plot_flow_data()</a></code> function will plot all daily data in the
data frame. The plot can be filtered by years and dates.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_flow_data_symbols.html">plot_flow_data_symbols</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                       start_year <span class="op">=</span> <span class="fl">1972</span>, end_year <span class="op">=</span> <span class="fl">1976</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Flow_Data_Symbols</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
<p>The <code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> function provides an overview of
the number of flow values per year and each month per year, along with
annual minimums, maximums, means, and standard deviations to inspect for
outliers in the data.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/screen_flow_data.html">screen_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year n_days n_Q n_missing_Q E_Symbol No_Symbol B_Symbol
1        08NM116 1949    365 183         182       10       173        0
2        08NM116 1950    365 183         182        0       183        0
3        08NM116 1951    365 183         182        0       183        0
4        08NM116 1952    366 183         183        0       183        0
5        08NM116 1953    365 183         182        0       183        0
6        08NM116 1954    365 183         182        0       183        0
  A_Symbol Minimum Maximum      Mean Median StandardDeviation Jan_missing_Q
1        0   0.623    49.3  7.771066   2.27          10.49771            31
2        0   0.623    52.1  7.760432   2.07          10.77839            31
3        0   0.623    49.3  8.991197   3.71          10.91531            31
4        0   0.850    50.7 10.277541   3.17          11.87987            31
5        0   0.340    62.3  8.303328   4.56           9.52511            31
6        0   0.566    36.2 11.281011   5.38          10.96519            31
  Feb_missing_Q Mar_missing_Q Apr_missing_Q May_missing_Q Jun_missing_Q
1            28            31             0             0             0
2            28            31             0             0             0
3            28            31             0             0             0
4            29            31             0             0             0
5            28            31             0             0             0
6            28            31             0             0             0
  Jul_missing_Q Aug_missing_Q Sep_missing_Q Oct_missing_Q Nov_missing_Q
1             0             0             0            31            30
2             0             0             0            31            30
3             0             0             0            31            30
4             0             0             0            31            30
5             0             0             0            31            30
6             0             0             0            31            30
  Dec_missing_Q
1            31
2            31
3            31
4            31
5            31
6            31</code></pre>
<p>To view the summary data in the <code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code>
function, the <code><a href="../reference/plot_data_screening.html">plot_data_screening()</a></code> function will plot the
annual minimums, maximums, means, medians, and standard deviations, with
the point coloured by data availability.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_data_screening.html">plot_data_screening</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Data_Screening</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
<p>Use the <code><a href="../reference/plot_missing_dates.html">plot_missing_dates()</a></code> function to plot out the
missing dates for each month of each year to view for data availability
and gaps.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_missing_dates.html">plot_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Missing_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
<p>Use the <code><a href="../reference/plot_annual_symbols.html">plot_annual_symbols()</a></code> function to plot the
symbols on an annual basis to view the data quality and data
availability. The default plots by day of year, but there are options to
view annual counts of symbols.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_symbols.html">plot_annual_symbols</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Symbols</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
<hr>
</div>
<div class="section level2">
<h2 id="functions-for-calculating-statistics">6. Functions for Calculating Statistics<a class="anchor" aria-label="anchor" href="#functions-for-calculating-statistics"></a>
</h2>
<p>The majority of the <code>fasstr</code> functions produce statistics
over a certain time period, either long-term, annually, monthly, or
daily. These statistics are produced using the <code>calc_*</code>
functions and can be visualized using their corresponding
<code>plot_*</code> functions. The following sections are an overview of
these functions.</p>
<div class="section level3">
<h3 id="basic-summary-statistics">Basic Summary Statistics<a class="anchor" aria-label="anchor" href="#basic-summary-statistics"></a>
</h3>
<p>These functions calculate the means, medians, maximums, minimums, and
percentiles (choose using the <code>percentiles</code> argument) of a
flow data set:</p>
<ul>
<li>
<code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code> - calculate the long-term
and long-term monthly summary statistics based on daily mean flows</li>
<li>
<code><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats()</a></code> - calculate the long-term
annual and monthly summary statistics based on monthly mean flows</li>
<li>
<code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> - calculate annual summary
statistics</li>
<li>
<code><a href="../reference/calc_monthly_stats.html">calc_monthly_stats()</a></code> - calculate annual monthly summary
statistics</li>
<li>
<code><a href="../reference/calc_daily_stats.html">calc_daily_stats()</a></code> - calculate daily summary
statistics</li>
</ul>
<p>These basic statistics can also be viewed using their corresponding
plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code> - plot the long-term
monthly summary statistics based on daily mean flows</li>
<li>
<code><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats()</a></code> - plot the long-term
monthly summary statistics based on annual monthly mean flows</li>
<li>
<code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> - plot annual summary
statistics</li>
<li>
<code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> - plot annual monthly summary
statistics</li>
<li>
<code><a href="../reference/plot_daily_stats.html">plot_daily_stats()</a></code> - plot daily summary statistics</li>
</ul>
<p>This function produced flow duration curves:</p>
<ul>
<li>
<code><a href="../reference/plot_flow_duration.html">plot_flow_duration()</a></code> - plot flow duration curves</li>
</ul>
<p>These other long-term functions summarize the data over the entire
record:</p>
<ul>
<li>
<code><a href="../reference/calc_longterm_mean.html">calc_longterm_mean()</a></code> - calculate the long-term mean
annual discharge</li>
<li>
<code><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile()</a></code> - calculate the long-term
percentiles</li>
<li>
<code><a href="../reference/calc_flow_percentile.html">calc_flow_percentile()</a></code> - calculate the percentile rank
of a flow value</li>
</ul>
<div class="section level4">
<h4 id="basic-long-term-statistics">Basic long-term statistics<a class="anchor" aria-label="anchor" href="#basic-long-term-statistics"></a>
</h4>
<p>The long-term <code>calc_</code> and <code>plot_</code> functions
calculate the long-term and long-term monthly mean, median, maximum,
minimum, and percentiles of all daily mean flows.</p>
<p>For <code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code>, for a given month, all
daily flow values for a given month over the entire record are
summarized together. For the ‘Long-term’ category, it summarizes all
flow values over the entire record to determine the mean, median,
maximum, minimum, and selected percentiles of daily flows. You can also
specify a certain period of months to summarize together (ex. Jul-Sep
flows) using the <code>custom_months</code> argument (listing the
months) and labeling it using the <code>custom_months_label</code>
argument (ex. “Summer Flows”).</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>   STATION_NUMBER     Month      Mean Median Maximum Minimum     P10    P90
1         08NM116       Jan  1.144262  0.940    9.50   0.160  0.5759  1.780
2         08NM116       Feb  1.158765  0.960    5.81   0.140  0.5422  1.950
3         08NM116       Mar  1.800957  1.290   17.50   0.380  0.7172  3.550
4         08NM116       Apr  8.194391  5.875   53.50   0.505  1.4190 18.010
5         08NM116       May 24.368688 21.800   80.80   2.550 10.3300 40.800
6         08NM116       Jun 22.541514 20.300   86.20   0.450  6.1990 41.110
7         08NM116       Jul  6.233644  3.940   76.80   0.332  1.1800 13.700
8         08NM116       Aug  2.184697  1.560   22.40   0.427  0.8343  4.148
9         08NM116       Sep  2.300251  1.600   17.60   0.364  0.7709  4.700
10        08NM116       Oct  2.134815  1.650   15.20   0.267  0.8440  4.250
11        08NM116       Nov  1.921402  1.510   11.70   0.260  0.5990  3.750
12        08NM116       Dec  1.263718  1.070    7.30   0.244  0.5410  2.200
13        08NM116 Long-term  6.282043  1.810   86.20   0.140  0.7100 20.100</code></pre>
<p>The <code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code> will plot the monthly
mean, median, maximum, and minimum values along with selected inner and
outer percentiles ribbons on one plot. Change the inner and outer
percentile ranges using the <code>inner_percentiles</code> and
<code>outer_percentiles</code> arguments, remove the maximum and minimum
ribbon using <code>include_extremes = FALSE</code>, or add a specific
year using <code>add_year</code>.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                          inner_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">75</span><span class="op">)</span>,</span>
<span>                          outer_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$`Long-term_Daily_Statistics`</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-28-1.png" width="672"></p>
<p>Similarly, the <code><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats()</a></code> functions
will calculate the mean, median, maximum, and percentiles of monthly
mean flows from all years. Meaning the all daily flows for each month
and each year are averaged, and the statistics are based on these annual
monthly means. The “Annual” data row summarizes the mean, median,
maximum, and percentiles from all annual means.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>   STATION_NUMBER  Month      Mean     Median   Maximum    Minimum        P10
1         08NM116    Jan  1.144262  0.9723548  6.117742  0.3155161  0.6245355
2         08NM116    Feb  1.159891  0.9649821  3.831786  0.3528276  0.6002868
3         08NM116    Mar  1.800957  1.4381613  6.926774  0.5067419  0.8427516
4         08NM116    Apr  8.194391  7.7333333 23.880333  1.5993333  2.8767667
5         08NM116    May 24.368688 23.8032259 44.987097 13.9861288 16.0945807
6         08NM116    Jun 22.541514 22.0521668 48.640000  3.1504333 11.7849333
7         08NM116    Jul  6.233644  4.4229032 25.639355  0.9213871  1.9778548
8         08NM116    Aug  2.184697  1.7551613 10.193548  0.8721290  1.1265258
9         08NM116    Sep  2.300251  1.7156667  8.109333  0.6999667  1.0055133
10        08NM116    Oct  2.134815  1.8187097  5.661290  0.5329032  1.0166065
11        08NM116    Nov  1.921402  1.5382167  5.413667  0.4982333  0.7148133
12        08NM116    Dec  1.263718  1.0975645  3.648387  0.4502581  0.5481516
13        08NM116 Annual  6.281955  6.2583836 11.134121  2.8761370  4.3651392
         P90
1   1.673323
2   1.716647
3   2.838355
4  13.035733
5  32.740968
6  35.648000
7  12.941419
8   3.371935
9   4.054300
10  3.664829
11  3.383433
12  2.139194
13  8.355335</code></pre>
<p>The corresponding <code><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats()</a></code> function
plots the data, with similar options as
<code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code>.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$`Long-term_Monthly_Statistics`</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-31-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="basic-annual-statistics">Basic annual statistics<a class="anchor" aria-label="anchor" href="#basic-annual-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> and
<code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> functions calculate the mean, median,
maximum, minimum, and percentiles of daily flows for every year of data
provided. In calculating, all daily flow values are grouped by year.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year     Mean Median Maximum Minimum    P10   P90
1        08NM116 1974 8.430181   1.34    66.0   0.447 0.7092 32.98
2        08NM116 1975 5.482636   1.54    48.7   0.320 0.5800 19.58
3        08NM116 1976 8.180694   3.84    71.1   0.736 0.8835 25.55
4        08NM116 1977 4.381567   1.26    36.0   0.564 0.7760 17.20
5        08NM116 1978 6.747608   3.28    44.5   0.532 0.8278 19.70
6        08NM116 1979 4.401564   1.56    43.0   0.411 0.6182 15.88</code></pre>
<p>The percentiles in the <code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> function are
fully customizable like the <code>calc_</code> function.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                  log_discharge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<pre><code>Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-34-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="basic-monthly-statistics">Basic monthly statistics<a class="anchor" aria-label="anchor" href="#basic-monthly-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_monthly_stats.html">calc_monthly_stats()</a></code> and
<code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> functions calculate the mean, median,
maximum, minimum, and percentiles of daily flows for each month of each
year. In calculating, all daily flow values are grouped by year and
month.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_monthly_stats.html">calc_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Month       Mean Median Maximum Minimum     P10    P90
1        08NM116 1974   Jan  1.0234194  1.020    1.26   0.864  0.9060  1.120
2        08NM116 1974   Feb  0.9848214  0.984    1.06   0.830  0.9442  1.043
3        08NM116 1974   Mar  1.2113226  1.120    2.14   0.855  0.9370  1.970
4        08NM116 1974   Apr  7.7613333  4.910   28.30   1.850  1.9190 18.680
5        08NM116 1974   May 29.8451611 30.300   50.40  15.900 17.5000 43.300
6        08NM116 1974   Jun 44.4600002 44.900   66.00  20.600 25.6100 61.250</code></pre>
<p>The percentiles in the <code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> function are
fully customizable like the <code>calc_</code> function. A plot for each
different statistic (means, medians, percentiles, etc.) is created to
visualize the monthly patterns over the years.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_monthly_stats.html">plot_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>$Mean_Monthly_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-37-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="basic-daily-statistics">Basic daily statistics<a class="anchor" aria-label="anchor" href="#basic-daily-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_daily_stats.html">calc_daily_stats()</a></code> and
<code><a href="../reference/plot_daily_stats.html">plot_daily_stats()</a></code> functions calculate the mean, median,
maximum, minimum, and percentiles of daily flows for each day of the
year. For example, for a given day of year (i.e. day 1 (Jan-01) or day 2
(Jan-02)), all flow values for that day from the entire record are
summarized together. Only the first 365 days of each year are summarized
(ignores the 366th day from leap years). In calculating, all daily flow
values are grouped by day of year.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_daily_stats.html">calc_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                 start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER   Date DayofYear     Mean Median Minimum Maximum      P5
1        08NM116 Jan-01         1 1.078136 0.9700   0.328    2.51 0.54025
2        08NM116 Jan-02         2 1.050818 0.9195   0.310    2.26 0.52600
3        08NM116 Jan-03         3 1.032045 0.8970   0.290    2.00 0.52450
4        08NM116 Jan-04         4 1.044068 0.9025   0.284    2.52 0.50515
5        08NM116 Jan-05         5 1.029909 0.8950   0.302    2.25 0.53450
6        08NM116 Jan-06         6 1.028023 0.8760   0.315    2.32 0.51905
      P25    P75    P95
1 0.69150 1.3800 1.8500
2 0.69025 1.3500 1.8850
3 0.70300 1.2200 1.9435
4 0.73175 1.2900 1.9575
5 0.70950 1.2300 1.9845
6 0.74175 1.2975 1.9205</code></pre>
<p>The plotting daily statistics function will plot the monthly mean,
median, maximum, and minimum values along with selected inner and outer
percentiles ribbons on one plot. Change the inner and outer percentile
ranges using the <code>inner_percentiles</code> and
<code>outer_percentiles</code> arguments, remove the maximum and minimum
ribbon using <code>include_extremes = FALSE</code>, or add a specific
year using <code>add_year</code>.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                 start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-40-1.png" width="672"></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                 start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                 add_year <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-41-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="flow-duration">Flow Duration<a class="anchor" aria-label="anchor" href="#flow-duration"></a>
</h4>
<p>Flow duration curves can be produced using the function, where
selected months and time periods can be selected:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_flow_duration.html">plot_flow_duration</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Flow_Duration</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-42-1.png" width="672"></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_flow_duration.html">plot_flow_duration</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                   months <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">9</span>,</span>
<span>                   include_longterm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Flow_Duration</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-43-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="other-long-term-statistics">Other Long-term Statistics<a class="anchor" aria-label="anchor" href="#other-long-term-statistics"></a>
</h4>
<p><code><a href="../reference/calc_longterm_mean.html">calc_longterm_mean()</a></code> calculates the mean of all the
daily flows, and specific percents of the long-term mean (using
<code>percent_MAD</code> argument). It can also be known as the
long-term mean annual discharge, MAD.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_mean.html">calc_longterm_mean</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                   percent_MAD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER    LTMAD    X5.MAD   X10.MAD  X20.MAD
1        08NM116 6.282043 0.3141021 0.6282043 1.256409</code></pre>
<p><code><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile()</a></code> calculates the selected
long-term percentiles of all the daily flow values.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                         start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                         percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">50</span>,<span class="fl">75</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER  P25  P50  P75
1        08NM116 1.03 1.81 5.72</code></pre>
<p><code><a href="../reference/calc_flow_percentile.html">calc_flow_percentile()</a></code> calculates the percentile rank of
a specified flow value, provided as <code>flow_value</code>. It compares
the flow value to all daily flow values to determines the percentile
rank.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_flow_percentile.html">calc_flow_percentile</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                     start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                     flow_value <span class="op">=</span> <span class="fl">6.270</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Percentile
1        08NM116     76.262</code></pre>
</div>
<div class="section level4">
<h4 id="basic-statistics-and-plotting-volumetric-and-yield-flows">Basic statistics and plotting volumetric and yield flows<a class="anchor" aria-label="anchor" href="#basic-statistics-and-plotting-volumetric-and-yield-flows"></a>
</h4>
<p>The <code>calc_</code> and <code>plot_</code> functions will
summarize any values provided to the functions with the default column
being ‘Value’. While for <code>fasstr</code> this defaults to daily mean
flows, any daily value can be summarized (water level, precipitation
amount, etc.) if the methods of analyses are similar for the parameter
type. As there are no units presented in the <code>calc_</code>
functions this should not be problem for most calculations. However, the
plots come standard with a “Discharge (cms)” y-axis, which can be
changed afterwards using <code>ggplot2</code> functions.</p>
<p>To facilitate the plotting of the daily volume or yield statistics
from <code>fasstr</code>, after adding them to your flow data using the
<code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> or <code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code>
functions, by listing the <code>values</code> argument as either
‘Volume_m3’ or ‘Yield_mm’ (from their respective <code>add_*</code>
functions), the discharge axis title will adjust accordingly.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"Volume_m3"</span>,</span>
<span>                    start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-50-1.png" width="672"></p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"Yield_mm"</span>,</span>
<span>                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-51-1.png" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="cumulative-flow-statistics">Cumulative Flow Statistics<a class="anchor" aria-label="anchor" href="#cumulative-flow-statistics"></a>
</h3>
<p>Total volumetric of runoff yield flows within a given year can
provide important hydrological information on a basin-wide scale. These
functions calculate the total volume (in cubic metres) or yield (in
millimetres; based on basin size) for a flow data set, at the annual,
monthly, or daily cumulative scale.</p>
<ul>
<li>
<code><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats()</a></code> - calculate annual (and
seasonal) cumulative flows</li>
<li>
<code><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats()</a></code> - calculate cumulative
monthly flow statistics</li>
<li>
<code><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats()</a></code> - calculate cumulative
daily flow statistics</li>
</ul>
<p>These statistics can also be viewed using their corresponding
plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats()</a></code> - plot annual and
seasonal total flows</li>
<li>
<code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> - plot cumulative
monthly flow statistics</li>
<li>
<code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> - plot cumulative daily
flow statistics</li>
</ul>
<p>While these functions default to volumetric flows, using
<code>use_yield = TRUE</code> and <code>basin_area</code> arguments will
calculate totals in runoff yield. If there is a <code>groups</code>
column of HYDAT station numbers, then the function will automatically
pull the basin area out of HYDAT if available; otherwise a basin area
will be required. Due to the requirements of a complete annual data set
to calculate total flows, only years of complete data are used.</p>
<div class="section level4">
<h4 id="cumulative-annual-statistics">Cumulative annual statistics<a class="anchor" aria-label="anchor" href="#cumulative-annual-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats()</a></code> function provides the
total annual volume or runoff yield (if <code>use_yield = TRUE</code> is
used). It totals all flows for a given year in cubic metres.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Total_Volume_m3
1        08NM116 1974       265854182
2        08NM116 1975       172900397
3        08NM116 1976       258693177
4        08NM116 1977       138177100
5        08NM116 1978       212792574
6        08NM116 1979       138807734</code></pre>
<p>By using the <code>include_seasons = TRUE</code> (logical TRUE/FALSE)
argument, total seasonal flows columns will be added to the results. Two
columns of two-seasons (2-six months), and four columns of four-seasons
(4-three months) will be added. The start month of the first seasons
will begin in the first month of the year (ex. Jan for Calendar years or
Oct for water years starting in October).</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                             start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                             include_seasons <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Total_Volume_m3 Jan.Jun_Volume_m3 Jul.Dec_Volume_m3
1        08NM116 1974       265854182         223662989          42191194
2        08NM116 1975       172900397         136045958          36854438
3        08NM116 1976       258693177         164417817          94275360
4        08NM116 1977       138177100         115279113          22897987
5        08NM116 1978       212792574         146659335          66133239
6        08NM116 1979       138807734         117444383          21363350
  Jan.Mar_Volume_m3 Apr.Jun_Volume_m3 Jul.Sep_Volume_m3 Oct.Dec_Volume_m3
1           8368013         215294976          35216640           6974554
2           5258218         130787741          24657350          12197088
3           7154266         157263552          72438624          21836736
4           6635779         108643334          13898650           8999338
5           9063014         137596321          42360192          23773046
6          13535424         103908959          14050541           7312810</code></pre>
<p>The total volumes for each year can be plotted using the
<code><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats()</a></code> function. When using
<code>include_seasons = TRUE</code> two additional plots will be
created, one for two- and four-seasons.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                             start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Total_Volume</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-56-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="cumulative-monthly-and-statistics">Cumulative monthly and statistics<a class="anchor" aria-label="anchor" href="#cumulative-monthly-and-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats()</a></code> and
<code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> functions calculate the
mean, median, maximum, minimum, and percentiles of total cumulative
monthly flows. For each month of each year, the total volume or runoff
yield is determined. Then within a given year, the cumulative total for
each month is determined by added all previous months (ex. Jan = Jan
total; Feb = Jan+Feb totals, etc.). Then the mean, median, maximum,
minimum, and percentiles are calculated based on those monthly
cumulative totals for each year. In interpreting the information, if a
given total flow is below the mean value, then the cumulative flow is
less than average, or less volume has passed through the station than
average at that point in time. The percentiles in the <code>calc_</code>
function are flexible using the <code>percentiles</code> argument.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                              start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>   STATION_NUMBER Month      Mean    Median   Maximum    Minimum        P5
1         08NM116   Jan   3064791   2604355  16385760   845078.4   1477241
2         08NM116   Feb   5893104   4954090  24560928  1729123.2   2696052
3         08NM116   Mar  10716787   8909525  38265696  3086380.8   4877798
4         08NM116   Apr  31956648  28939378  74097331  9895046.4  13004462
5         08NM116   May  97225741  91484726 159751008 50343551.6  54586215
6         08NM116   Jun 155653347 156396614 255162529 76246877.0  94118293
7         08NM116   Jul 172349538 177471648 301884193 81422928.3  99584121
8         08NM116   Aug 178201031 180792130 311904865 84962822.7 102593770
9         08NM116   Sep 184163281 187290446 323685505 86777136.3 105063372
10        08NM116   Oct 189881170 192634934 337755745 88204464.3 108435961
11        08NM116   Nov 194861443 195413731 346120993 89495885.1 110337003
12        08NM116   Dec 198246186 197364384 351125627 90701856.3 111818927
         P25       P75       P95
1    1952813   3552120   5276405
2    3821256   6449026  10836677
3    6629623  11874924  20988806
4   23204081  37045296  65757148
5   77641977 112968280 153230729
6  126292629 184640299 222609146
7  130357425 206338168 250096900
8  133904469 218750047 254809416
9  139696574 227954197 258678192
10 146308118 230884539 262619958
11 151523806 234482947 267038372
12 155162974 238912243 269723114</code></pre>
<p>The <code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> function will plot
the monthly total mean, median, maximum, and minimum values along with
the 5th, 25th, 75th, and 95th percentiles all on one plot. The
percentiles are not customizable for this function.</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                              start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Monthly_Cumulative_Volumetric_Stats</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-59-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="cumulative-daily-statistics">Cumulative daily statistics<a class="anchor" aria-label="anchor" href="#cumulative-daily-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats()</a></code> and
<code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> functions calculate the mean,
median, maximum, minimum, and percentiles of total cumulative daily
flows. For each day of each year, the total volume or runoff yield is
determined. Then within a given year, the cumulative total for each day
is determined by added all previous days (ex. Jan-01 = Jan-01 total;
Jan-02 = Jan-01+Jan-02 totals, etc.). Then the mean, median, maximum,
minimum, and percentiles are calculated based on those daily cumulative
totals for each year. In interpreting the information, if a given total
flow is below the mean value, then the cumulative flow is less than
average. In other words, less volume has passed through the station than
normal at that point in time. Viewing the plot below may help understand
how this function works. The percentiles in the <code>calc_</code>
function are flexible using the <code>percentiles</code> argument.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER   Date DayofYear      Mean   Median  Minimum Maximum       P5
1        08NM116 Jan-01         1  93150.98  83808.0  28339.2  216864  46677.6
2        08NM116 Jan-02         2 183941.67 160099.2  55123.2  412128  91756.8
3        08NM116 Jan-03         3 273110.40 236304.0  80179.2  581472 135237.6
4        08NM116 Jan-04         4 363317.89 313416.0 104716.8  768960 182023.2
5        08NM116 Jan-05         5 452302.04 388411.2 130809.6  952992 231876.0
6        08NM116 Jan-06         6 541123.20 466732.8 158025.6 1123200 280519.2
       P25      P75      P95
1  59745.6 119232.0 159840.0
2 119383.2 229392.0 325468.8
3 178891.2 339249.6 483192.0
4 241358.4 438480.0 623808.0
5 309182.4 546696.0 783172.8
6 368366.4 656596.8 973641.6</code></pre>
<p>The <code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> function will plot the
daily cumulative total mean, median, maximum, and minimum values along
with the 5th, 25th, 75th, and 95th percentiles all on one plot. The
percentiles are not customizable for this function.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                            start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                            use_yield <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Daily_Cumulative_Yield_Stats</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-62-1.png" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="other-annual-statistics">Other Annual Statistics<a class="anchor" aria-label="anchor" href="#other-annual-statistics"></a>
</h3>
<p>Beside the basic summary statistics, there are other useful
statistics for interpreting annual streamflow data. They include the
following::</p>
<ul>
<li>
<code><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing()</a></code> - calculate annual flow
timing</li>
<li>
<code><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows()</a></code> - calculate multiple n-day
annual low flow values and dates</li>
<li>
<code><a href="../reference/calc_annual_highflows.html">calc_annual_highflows()</a></code> - calculate multiple n-day
annual high flow values and dates</li>
<li>
<code><a href="../reference/calc_annual_extremes.html">calc_annual_extremes()</a></code> - calculate annual low and high
flow values and dates</li>
<li>
<code><a href="../reference/calc_annual_normal_days.html">calc_annual_normal_days()</a></code> - calculate annual normal
days and days above and below normal</li>
<li>
<code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> - calculate all
<code>fasstr</code> annual statistics</li>
</ul>
<p>and their corresponding and other plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_annual_flow_timing.html">plot_annual_flow_timing()</a></code> - plot annual flow
timing</li>
<li>
<code><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows()</a></code> - plot multiple n-day annual low
flow values and dates</li>
<li>
<code><a href="../reference/plot_annual_highflows.html">plot_annual_highflows()</a></code> - plot multiple n-day annual
low flow values and dates</li>
<li>
<code><a href="../reference/plot_annual_extremes.html">plot_annual_extremes()</a></code> - plot annual low and high flow
values and dates</li>
<li>
<code><a href="../reference/plot_annual_normal_days.html">plot_annual_normal_days()</a></code> - plot annual normal days and
days above and below normal</li>
<li>
<code><a href="../reference/plot_annual_means.html">plot_annual_means()</a></code> - plot annual means compared to the
long-term mean</li>
</ul>
<p>There are also a few functions that view give some of the annual
statistics context:</p>
<ul>
<li>
<code><a href="../reference/plot_annual_flow_timing_year.html">plot_annual_flow_timing_year()</a></code> - plot annual flow
timing for a given year</li>
<li>
<code><a href="../reference/plot_annual_extremes_year.html">plot_annual_extremes_year()</a></code> - plot annual low and high
flow values and dates for a given year</li>
<li>
<code><a href="../reference/plot_annual_normal_days_year.html">plot_annual_normal_days_year()</a></code> - plot annual normal
days and days above and below normal for a given year</li>
</ul>
<div class="section level4">
<h4 id="annual-flow-timing">Annual flow timing<a class="anchor" aria-label="anchor" href="#annual-flow-timing"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing()</a></code> calculates the day of year
when a portion of a total annual volumetric flow has occurred. Using the
<code>percent_total</code> argument, one or multiple portions of annual
flow can be calculated. Using 50 as the <code>percent_total</code> is
similar to the center of volume or timing of half flow. The day of year
and date will be also be produced.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year DoY_25pct_TotalQ Date_25pct_TotalQ DoY_33.3pct_TotalQ
1        08NM116 1974              135        1974-05-15                146
2        08NM116 1975              146        1975-05-26                153
3        08NM116 1976              143        1976-05-22                151
4        08NM116 1977              124        1977-05-04                131
5        08NM116 1978              134        1978-05-14                142
6        08NM116 1979              126        1979-05-06                133
  Date_33.3pct_TotalQ DoY_50pct_TotalQ Date_50pct_TotalQ DoY_75pct_TotalQ
1          1974-05-26              158        1974-06-07              173
2          1975-06-02              162        1975-06-11              177
3          1976-05-30              169        1976-06-17              220
4          1977-05-11              147        1977-05-27              165
5          1978-05-22              158        1978-06-07              204
6          1979-05-13              145        1979-05-25              161
  Date_75pct_TotalQ
1        1974-06-22
2        1975-06-26
3        1976-08-07
4        1977-06-14
5        1978-07-23
6        1979-06-10</code></pre>
<p>The timing of flows can also be plotted.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_flow_timing.html">plot_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Flow_Timing</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-65-1.png" width="672"></p>
<p>The timing of flows for a given year can also be plotted.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_flow_timing_year.html">plot_annual_flow_timing_year</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                             year_to_plot <span class="op">=</span> <span class="fl">1999</span><span class="op">)</span> </span></code></pre></div>
<pre><code>Warning: One or more calculations included missing values and NA's were
produced. If desired, filter data for complete years or months, or use the
'ignore_missing' or 'allowed_missing' arguments (if applicable) to ignore or
allow some missing values.</code></pre>
<pre><code>$Annual_Flow_Timing_Year</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-66-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="annual-low-flows">Annual low-flows<a class="anchor" aria-label="anchor" href="#annual-low-flows"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows()</a></code> calculates the annual minimum
values, the day of year, and dates of specified rolling mean days (can
do multiple days if desired).</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Min_1_Day Min_1_Day_DoY Min_1_Day_Date Min_3_Day
1        08NM116 1974     0.447           333     1974-11-29 0.5333333
2        08NM116 1975     0.320            11     1975-01-11 0.3783333
3        08NM116 1976     0.736            38     1976-02-07 0.7406667
4        08NM116 1977     0.564            73     1977-03-14 0.6273333
5        08NM116 1978     0.532            55     1978-02-24 0.6296667
6        08NM116 1979     0.411           268     1979-09-25 0.4156667
  Min_3_Day_DoY Min_3_Day_Date Min_7_Day Min_7_Day_DoY Min_7_Day_Date
1           334     1974-11-30 0.6018572           346     1974-12-12
2            39     1975-02-08 0.4158571            41     1975-02-10
3            63     1976-03-03 0.7564286            65     1976-03-05
4           252     1977-09-09 0.6865714            79     1977-03-20
5             3     1978-01-03 0.6642857             5     1978-01-05
6           269     1979-09-26 0.4370000           270     1979-09-27
  Min_30_Day Min_30_Day_DoY Min_30_Day_Date
1  0.6645667            358      1974-12-24
2  0.4937667             58      1975-02-27
3  0.7988333             66      1976-03-06
4  0.7876667             81      1977-03-22
5  0.7551000             16      1978-01-16
6  0.5684333            287      1979-10-14</code></pre>
<p>The annual low flow values and the day of the low flow values can be
plotted, separately, using the <code><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows()</a></code>
function.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Low_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-69-1.png" width="672"></p>
<pre><code>
$Annual_Low_Flows_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-69-2.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="annual-high-flows">Annual high flows<a class="anchor" aria-label="anchor" href="#annual-high-flows"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_highflows.html">calc_annual_highflows()</a></code> calculates the annual
maximum values, the day of year, and dates of specified rolling mean
days (can do multiple days if desired).</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_highflows.html">calc_annual_highflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                      start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Max_1_Day Max_1_Day_DoY Max_1_Day_Date Max_3_Day
1        08NM116 1974      66.0           168     1974-06-17  64.26667
2        08NM116 1975      48.7           153     1975-06-02  47.46667
3        08NM116 1976      71.1           168     1976-06-16  54.93333
4        08NM116 1977      36.0           123     1977-05-03  33.00000
5        08NM116 1978      44.5           157     1978-06-06  42.66667
6        08NM116 1979      43.0           147     1979-05-27  40.16667
  Max_3_Day_DoY Max_3_Day_Date Max_7_Day Max_7_Day_DoY Max_7_Day_Date
1           170     1974-06-19  62.21429           171     1974-06-20
2           155     1975-06-04  41.85714           158     1975-06-07
3           170     1976-06-18  45.02857           173     1976-06-21
4           159     1977-06-08  27.11429           161     1977-06-10
5           157     1978-06-06  37.01429           159     1978-06-08
6           147     1979-05-27  34.15714           148     1979-05-28
  Max_30_Day Max_30_Day_DoY Max_30_Day_Date
1   47.63000            174      1974-06-23
2   33.07667            178      1975-06-27
3   31.15000            173      1976-06-21
4   20.15000            160      1977-06-09
5   26.74333            166      1978-06-15
6   23.97000            154      1979-06-03</code></pre>
<p>The annual high flow values and the day of the high flow values can
be plotted, separately, using the <code><a href="../reference/plot_annual_highflows.html">plot_annual_highflows()</a></code>
function.</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_highflows.html">plot_annual_highflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                      start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_High_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-72-1.png" width="672"></p>
<pre><code>
$Annual_High_Flows_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-72-2.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="annual-extreme-both-high-and-low-flows">Annual extreme (both high and low) flows<a class="anchor" aria-label="anchor" href="#annual-extreme-both-high-and-low-flows"></a>
</h4>
<p>Similar to <code>*_annual_lowflows()</code> and
<code>*_annual_highflows()</code>, <code><a href="../reference/calc_annual_extremes.html">calc_annual_extremes()</a></code>
calculates the annual maximum and minimum values, the day of year, and
dates of specified rolling mean days and specified months for each of
the high and low flows.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_extremes.html">calc_annual_extremes</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                     roll_days_min <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                     roll_days_max <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Min_7_Day Min_7_Day_DoY Min_7_Day_Date Max_3_Day
1        08NM116 1974 0.6018572           346     1974-12-12  64.26667
2        08NM116 1975 0.4158571            41     1975-02-10  47.46667
3        08NM116 1976 0.7564286            65     1976-03-05  54.93333
4        08NM116 1977 0.6865714            79     1977-03-20  33.00000
5        08NM116 1978 0.6642857             5     1978-01-05  42.66667
6        08NM116 1979 0.4370000           270     1979-09-27  40.16667
  Max_3_Day_DoY Max_3_Day_Date
1           170     1974-06-19
2           155     1975-06-04
3           170     1976-06-18
4           159     1977-06-08
5           157     1978-06-06
6           147     1979-05-27</code></pre>
<p>The annual extremes values and the days can be plotted:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_extremes.html">plot_annual_extremes</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                     roll_days_min <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                     roll_days_max <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Extreme_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-75-1.png" width="672"></p>
<pre><code>
$Annual_Extreme_Flows_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-75-2.png" width="672"></p>
<p>The annual extremes values and the days for a given year can also be
plotted:</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_extremes_year.html">plot_annual_extremes_year</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                          roll_days_min <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                          roll_days_max <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                          start_year <span class="op">=</span> <span class="fl">1974</span>,</span>
<span>                          year_to_plot <span class="op">=</span> <span class="fl">1999</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Extremes_Year</code></pre>
<pre><code>Warning: Transformation introduced infinite values in continuous y-axis
Transformation introduced infinite values in continuous y-axis</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-76-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="number-of-normal-and-abovebelow-normal-days-per-year">Number of normal (and above/below normal) days per year<a class="anchor" aria-label="anchor" href="#number-of-normal-and-abovebelow-normal-days-per-year"></a>
</h4>
<p>The <code><a href="../reference/calc_annual_normal_days.html">calc_annual_normal_days()</a></code> calculates the number of
days per year that are normal and above and below “normal”, “normal”
typically defined as 25th and 75th percentiles. The normal limits can be
determined using the <code>normal_percentiles</code> argument, listing
the lower and upper normal ranges, respectively
(e.g. <code>normal_percentiles = c(25, 75)</code>). The function
calculates the lower and upper percentiles for each day of the year over
all years and sums all days that are within and above or below the daily
normal ranges for a given year. Rolling averages can also be used in
this function using the <code>roll_days</code> argument.</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_normal_days.html">calc_annual_normal_days</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Year Normal_Days Below_Normal_Days Above_Normal_Days
1        08NM116 1974         216                72                77
2        08NM116 1975         195               138                32
3        08NM116 1976         168                54               144
4        08NM116 1977         250               107                 8
5        08NM116 1978         230                21               114
6        08NM116 1979         154               144                67</code></pre>
<p>Each of the above, below, and normal days can be plotted using the
<code><a href="../reference/plot_annual_normal_days.html">plot_annual_normal_days()</a></code> function.</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_normal_days.html">plot_annual_normal_days</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Normal_Days</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-79-1.png" width="672"></p>
<p>The daily flows with normal categories for a given year can also be
plotted.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_normal_days_year.html">plot_annual_normal_days_year</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                             year_to_plot <span class="op">=</span> <span class="fl">1999</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Normal_Days_Year</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-80-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="calculating-all-annual-statistics">Calculating all annual statistics<a class="anchor" aria-label="anchor" href="#calculating-all-annual-statistics"></a>
</h4>
<p>The <code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> calculates all statistics
that have a single annual value. This includes all the
<code>calc_annual_*</code> and the
<code>calc_monthly_statistics()</code> functions. Several arguments
provided for customization of the statistics. There is no corresponding
plotting function for this calculation function.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,</span>
<span>                               start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>  [1] "STATION_NUMBER"    "Year"              "Annual_Maximum"   
  [4] "Annual_Mean"       "Annual_Median"     "Annual_Minimum"   
  [7] "Annual_P10"        "Annual_P90"        "Min_1_Day"        
 [10] "Min_1_Day_DoY"     "Min_3_Day"         "Min_3_Day_DoY"    
 [13] "Min_7_Day"         "Min_7_Day_DoY"     "Min_30_Day"       
 [16] "Min_30_Day_DoY"    "Total_Volume_m3"   "Jan-Jun_Volume_m3"
 [19] "Jul-Dec_Volume_m3" "Jan-Mar_Volume_m3" "Apr-Jun_Volume_m3"
 [22] "Jul-Sep_Volume_m3" "Oct-Dec_Volume_m3" "Total_Yield_mm"   
 [25] "Jan-Jun_Yield_mm"  "Jul-Dec_Yield_mm"  "Jan-Mar_Yield_mm" 
 [28] "Apr-Jun_Yield_mm"  "Jul-Sep_Yield_mm"  "Oct-Dec_Yield_mm" 
 [31] "DoY_25pct_TotalQ"  "DoY_33pct_TotalQ"  "DoY_50pct_TotalQ" 
 [34] "DoY_75pct_TotalQ"  "Normal_Days"       "Below_Normal_Days"
 [37] "Above_Normal_Days" "Jan_Mean"          "Jan_Median"       
 [40] "Jan_Maximum"       "Jan_Minimum"       "Jan_P10"          
 [43] "Jan_P20"           "Feb_Mean"          "Feb_Median"       
 [46] "Feb_Maximum"       "Feb_Minimum"       "Feb_P10"          
 [49] "Feb_P20"           "Mar_Mean"          "Mar_Median"       
 [52] "Mar_Maximum"       "Mar_Minimum"       "Mar_P10"          
 [55] "Mar_P20"           "Apr_Mean"          "Apr_Median"       
 [58] "Apr_Maximum"       "Apr_Minimum"       "Apr_P10"          
 [61] "Apr_P20"           "May_Mean"          "May_Median"       
 [64] "May_Maximum"       "May_Minimum"       "May_P10"          
 [67] "May_P20"           "Jun_Mean"          "Jun_Median"       
 [70] "Jun_Maximum"       "Jun_Minimum"       "Jun_P10"          
 [73] "Jun_P20"           "Jul_Mean"          "Jul_Median"       
 [76] "Jul_Maximum"       "Jul_Minimum"       "Jul_P10"          
 [79] "Jul_P20"           "Aug_Mean"          "Aug_Median"       
 [82] "Aug_Maximum"       "Aug_Minimum"       "Aug_P10"          
 [85] "Aug_P20"           "Sep_Mean"          "Sep_Median"       
 [88] "Sep_Maximum"       "Sep_Minimum"       "Sep_P10"          
 [91] "Sep_P20"           "Oct_Mean"          "Oct_Median"       
 [94] "Oct_Maximum"       "Oct_Minimum"       "Oct_P10"          
 [97] "Oct_P20"           "Nov_Mean"          "Nov_Median"       
[100] "Nov_Maximum"       "Nov_Minimum"       "Nov_P10"          
[103] "Nov_P20"           "Dec_Mean"          "Dec_Median"       
[106] "Dec_Maximum"       "Dec_Minimum"       "Dec_P10"          
[109] "Dec_P20"          </code></pre>
</div>
<div class="section level4">
<h4 id="plotting-annual-means">Plotting annual means<a class="anchor" aria-label="anchor" href="#plotting-annual-means"></a>
</h4>
<p>The <code><a href="../reference/plot_annual_means.html">plot_annual_means()</a></code> function provides a way to
visualize how annual means fluctuate around the long-term mean. The
x-axis is located at the long-term mean annual discharge (mean of all
discharge values over all years) and the bars shows the annual means.
The plot is essentially an anomaly plot but with their y-value matching
the mean value and not difference from the mean.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_means.html">plot_annual_means</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </span></code></pre></div>
<pre><code>$Annual_Means</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-82-1.png" width="768"></p>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="functions-for-computing-analyses">7. Functions for Computing Analyses<a class="anchor" aria-label="anchor" href="#functions-for-computing-analyses"></a>
</h2>
<p>There are several functions that provide more in-depth analyses.
These functions begin with <code>compute_</code> instead of
<code>calc_</code> and typically produce more than just a tibble data
frame of statistics, like the <code>calc_</code> functions. Most of
these produce a list of objects, consisting of both tibbles and plots.
There are three groups of analysis functions: annual trending, annual
volume frequency analyses, and a full analysis (of most
<code>fasstr</code> functions). There is a separate vignette for each
analysis type to provide more information.</p>
<div class="section level3">
<h3 id="annual-trending-analysis">Annual Trending Analysis<a class="anchor" aria-label="anchor" href="#annual-trending-analysis"></a>
</h3>
<p>The <code><a href="../reference/compute_annual_trends.html">compute_annual_trends()</a></code> function calculates
prewhitened non-parametric annual trends on streamflow data using the <a href="https://CRAN.R-project.org/package=zyp" class="external-link"><code>zyp</code></a>
package. The function calculates various annual metrics using the
<code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> function and then calculates and
plots the trending data. The magnitude of trends is first computed using
the Theil-Sen approach. Depending on the selected method, either
<code>"zhang"</code> or <code>"yuepilon"</code>, the trends are adjusted
for autocorrelation and then a Mann-Kendall test for trend is applied to
the series. The <code>zhang</code> method is recommended for hydrologic
applications over <code>yuepilon</code>. See the <a href="https://CRAN.R-project.org/package=zyp" class="external-link"><code>zyp</code></a>
package and the <a href="https://bcgov.github.io/fasstr/articles/fasstr_trending_analysis.html">trending
vignette</a> for more information.</p>
<p>The <code><a href="../reference/compute_annual_trends.html">compute_annual_trends()</a></code> function outputs several
objects in a list:</p>
<ol style="list-style-type: decimal">
<li>$Annual_Trends_Data - a tibble of annual data from the
<code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> function used for trending</li>
<li>$Annual_Trends_Results - a tibble of annual trending results, from
both <code>zyp</code> and <code>fasstr</code>
</li>
<li>$Annual_* - a <code>ggplot2</code> object for every annual statistic
trended, with the slope plotted if an alpha value is chosen using the
<code>zyp_alpha</code> argument (ex.
<code>zyp_alpha = 0.05</code>).</li>
</ol>
</div>
<div class="section level3">
<h3 id="volume-frequency-analyses">Volume Frequency Analyses<a class="anchor" aria-label="anchor" href="#volume-frequency-analyses"></a>
</h3>
<p>There are five <code>fasstr</code> functions that perform various
volume frequency analyses. Frequency analyses are used to determine
probabilities of events of certain sizes (typically annual high or low
flows). The analyses produce plots of event series and computed
quantiles fitted from either Log-Pearson Type III or Weibull probability
distributions. See the <a href="https://bcgov.github.io/fasstr/articles/fasstr_frequency_analysis.html">frequency
analysis vignette</a> for more information.</p>
<p>The <code><a href="../reference/compute_annual_frequencies.html">compute_annual_frequencies()</a></code> performs an annual
daily (or selected duration using <code>roll_days</code> argument)
low-flow (by default) or high-flow (using <code>use_max = TRUE</code>
argument) frequency analysis on annual series. This analysis uses the
daily mean lows or highs. The
<code><a href="../reference/compute_hydat_peak_frequencies.html">compute_hydat_peak_frequencies()</a></code> function performs an
annual instantaneous low (by default) or high peak frequency analysis.
The <code>data</code> argument cannot be used for the HYDAT peak
analysis. Both functions output several objects in a list:</p>
<ol style="list-style-type: decimal">
<li>$Freq_Analysis_Data - Tibble of computed annual minimums (or
maximums)</li>
<li>$Freq_Plot_Data - Tibble of plotting coordinates used in the
frequency plot</li>
<li>$Freq_Plot - <code>ggplot2</code> object of the frequency plot</li>
<li>$Freq_Fitting - List of <a href="https://cran.r-project.org/package=fitdistrplus" class="external-link"><code>fitdistrplus</code></a>
objects of the fitted distributions.</li>
<li>$Freq_Fitted_Quantiles - Tibble with fitted quantiles.</li>
</ol>
<p>The <code><a href="../reference/compute_frequency_quantile.html">compute_frequency_quantile()</a></code> function performs
annual daily (or selected duration) low-flow (by default) or high-flow
(using <code>use_max = TRUE</code> argument) frequency analysis on
annual series but only returns the fitted quantile based on the selected
return period. Both the numeric arguments <code>roll_days</code> and
<code>return_period</code> are required. It results in a single value.
For example, supplying <code>roll_days = 7</code> and
<code>return_period = 10</code> to the function with a data set will
return the 7-day low-flow with a 10-year return period (i.e. 7Q10).</p>
<p>To compute a volume frequency analysis on custom data, use the
<code><a href="../reference/compute_frequency_analysis.html">compute_frequency_analysis()</a></code> function. The data points to
be used in the analysis must be provided in a data frame with a column
of events (or years), the flow values (values), and the measure (or the
type of value it is, “7-day lows”, for example. All other data filtering
options are not included.</p>
</div>
<div class="section level3">
<h3 id="full-analysis">Full Analysis<a class="anchor" aria-label="anchor" href="#full-analysis"></a>
</h3>
<p>If desired, a suite of <code>fasstr</code> functions can be computed
using the <code><a href="../reference/compute_full_analysis.html">compute_full_analysis()</a></code>, producing lists of
tables and plots organized in lists by analysis type.
<code><a href="../reference/write_full_analysis.html">write_full_analysis()</a></code> will create both all the objects and
also write data to your computer, in Excel-ready formats and image
files. The filetypes of plots and tables can be set using the
<code>plot_filetype</code> and <code>table_filetype</code> arguments,
respectively. See the <a href="https://bcgov.github.io/fasstr/articles/fasstr_full_analysis.html">full
analysis vignette</a> for more information on customizing the analyses
and statistics.</p>
<p>The plots and tables are grouped into the following analyses:</p>
<ol style="list-style-type: decimal">
<li>Screening</li>
<li>Long-term</li>
<li>Annual</li>
<li>Monthly</li>
<li>Daily</li>
<li>Annual Trends</li>
<li>Low-flow Frequencies</li>
</ol>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="customizing-functions-with-arguments---data-filtering-and-options">8. Customizing Functions with Arguments - Data Filtering and
Options<a class="anchor" aria-label="anchor" href="#customizing-functions-with-arguments---data-filtering-and-options"></a>
</h2>
<p>While tidying and filtering data to desired parameters or time
periods can be completed to flow data frames prior to passing them onto
<code>fasstr</code> functions, a suite of function arguments have been
provided to allow for in-function customization of tidying and
filtering. Described here are some of the options available in
<code>fasstr</code> functions on how to handle missing dates, filter for
specific years or months, and select desired statistics from some of the
<code>fasstr</code> functions. Not all functions have all these options
see the <a href="https://bcgov.github.io/fasstr/reference/index.html">documentation</a>
for each function usage (can also use <code><a href="../reference/calc_annual_stats.html">?calc_annual_stats</a></code> to
see documentation in R).</p>
<div class="section level3">
<h3 id="handling-missing-dates">Handling Missing Dates<a class="anchor" aria-label="anchor" href="#handling-missing-dates"></a>
</h3>
<p>Most functions will automatically
(<code>ignore_missing = FALSE</code>) not calculate a statistic for a
given period (a year or month or day of year, for example) if there is a
date with missing data (<code>NA</code> value) and will result in an NA
value or will not plot (base <code>na.rm = FALSE</code>). For example,
if there at least one missing day for a given year, an annual statistic
will not be calculated for that year. A warning message will appear in
the console indicating as such to ensure the user is aware of missing
data. See the following code for an example with missing dates:</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></code></pre></div>
<p>If you want to calculate the statistics regardless of the number of
missing dates per time period, use the
<code>ignore_missing = TRUE</code> argument.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Starting with fasstr 0.4.0, to allow a certain percentage of missing
dates per period and still calculate a statistic, the argument
<code>allow_missing</code> (and <code>allow_missing_annual</code> and
<code>allow_missing_monthly</code> in come cases) will override the
<code>ignore_missing</code> argument in certain functions. A numeric
value between 0 and 100 indicating the percentage of missing dates
allowed to be included is provided to the argument to calculate a
statistic (0 to 100 percent). For example, if 3-4 days of missing dates
are permitted per year to calculate annual means, percentiles or
extremes, then 1% of days can be applied as
<code>allowed_missing = 1</code>.</p>
<p>To maintain usage of <code>ignore_missing</code>, if
<code>ignore_missing = FALSE</code> then it defaults to <code>0</code>
(zero missing dates allowed), and if <code>ignore_missing = TRUE</code>
then it defaults to <code>100</code> (any missing dates allowed). This
argument is included only in functions that calculate annual or monthly
means, percentiles, minimums, and maximums including various
<code>calc_annual_*</code> and <code>plot_annual_*</code> functions,
<code><a href="../reference/calc_monthly_stats.html">calc_monthly_stats()</a></code>, <code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code>,
and most <code>compute_*</code> functions. See function documentation to
see if included. The following example allows the data to have 25%, or
~91 days, of missing dates, to calculate annual statistics:</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  allowed_missing <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dates-filtering">Dates Filtering<a class="anchor" aria-label="anchor" href="#dates-filtering"></a>
</h3>
<p>There are several options in the function that allow you choose year
options and to filter for specific time periods. If there is a specific
period, years or months, to be analyzed there are several options to
customize the data supplied. While filtering of data can be done to your
flow data set prior supplying it to a function (using <code>dplyr</code>
filtering, for example), these options provide quick solutions for
in-function filtering that can be incorporated into a workflow.</p>
<div class="section level4">
<h4 id="water-year-and-start-month">Water year and start month<a class="anchor" aria-label="anchor" href="#water-year-and-start-month"></a>
</h4>
<p>By default, the functions will analyze/group/filter data by calendar
years (Jan-Dec). However, some analyses require use of water years, or
hydrologic years, starting in other months. If use of water years is
desired not starting in January, then set <code>water_year_start</code>
with a month other than 1. The water year is identified by the calendar
year in which it ends. For example, a water year from Oct 2000 to Sep
2001 would be water year 2001.</p>
<p>Example of a default water year, starting in October:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  water_year_start <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p>Example of a water year starting in August:</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  water_year_start <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="selecting-and-excluding-years">Selecting and excluding years<a class="anchor" aria-label="anchor" href="#selecting-and-excluding-years"></a>
</h4>
<p>To specify select years used in your analysis, the
<code>start_year</code> and <code>end_year</code> arguments (providing a
single value) can filter the years. Using the <code>exclude_years</code>
argument (providing a single or vector of years) will allow you to
remove certain years from the analysis. Leaving these arguments blank
will include all years in the data set for the analysis.</p>
<p>Example of filtering for start and end years:</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span></code></pre></div>
<p>Examples of removing certain years (outliers, bad data, etc.) using
exclude_years:</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  exclude_years <span class="op">=</span> <span class="fl">1982</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  exclude_years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1982</span><span class="op">:</span><span class="fl">1984</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="using-only-years-with-complete-data">Using only years with complete data<a class="anchor" aria-label="anchor" href="#using-only-years-with-complete-data"></a>
</h4>
<p>If your data has missing dates, but you would like to use only those
years with complete data, some functions utilize the
<code>complete_years</code> argument where the data will automatically
be filtered for years with complete data and statistics will be
calculated. Only years with complete data will be included into the
following example.</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          complete_years <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Some functions, like below, require only years with complete data
(statistics are based on full years of data), so years with missing
dates will be automatically ignored:</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="selecting-for-months">Selecting for months<a class="anchor" aria-label="anchor" href="#selecting-for-months"></a>
</h4>
<p>Most functions allow you to specify select months used in your
analysis, using the <code>months</code> argument. By providing a vector
of months (1 through 12) only those months will be used in an analysis.
For example, using the <code>months</code> argument with the
<code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function will calculate the annual
statistics for only those months listed. So, if summer statistics are
required you supply <code>months = 6:8</code> to the function. Leaving
this arguments blank will include all months in the data set for the
analysis. As of fasstr 0.4.0, the <code>months</code> argument is now
included in all <code>calc_</code>, <code>plot_</code>, and
<code>compute_</code> functions to allow for selecting of specific
months in all analyses, including <code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code>
and <code><a href="../reference/compute_annual_trends.html">compute_annual_trends()</a></code>.</p>
<p>Example of filtering for months June through August:</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  months <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p>Example of flow timing / center of volume in winter/spring
months:</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">calc_flow_timing</span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                 start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                 end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                 months <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<p>A few functions, including the
<code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code>,
<code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code>, and
<code><a href="../reference/plot_flow_duration.html">plot_flow_duration()</a></code> functions will allow you to add a
customized time period to your data frame or plot. Using the
<code>custom_months</code> argument you can list a vector of months
(numeric 1:12). By default, the data will be labelled as “Custom-Months”
but can be customized by providing a character string to the
<code>custom_months_label</code> argument.</p>
<p>Example of custom months and labeling:</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                          end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                          custom_months <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">8</span>,</span>
<span>                          custom_months_label <span class="op">=</span> <span class="st">"Summer"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="rolling-averages">Rolling averages<a class="anchor" aria-label="anchor" href="#rolling-averages"></a>
</h3>
<p>Some functions allow you to specify analyzing the data using rolling
mean data as opposed to the daily means. For those functions with the
<code>roll_days</code> and <code>roll_align</code> arguments, analyses
will be computed on the daily mean by default (can leave them blank if
so). If choosing to conduct an analysis on 7-day rolling means, you
would set <code>roll_days = 7</code>. Some functions allow multiple
rolling days to be provided (see function documentation). The
<code>roll_align</code> argument determines the direction of the rolling
mean: see the “Adding rolling means” portion in Section 4 to see how the
<code>roll_days</code> and <code>roll_align</code> work together.</p>
<p>Example of a 7-day rolling mean analysis (single
<code>roll_days</code> use):</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>,</span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  roll_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<p>Example of a 7- and 30-day rolling mean analysis (multiple
<code>roll_days</code> use):</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                     start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                     end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                     roll_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-97-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="percentiles-and-other-statistics">Percentiles and other statistics<a class="anchor" aria-label="anchor" href="#percentiles-and-other-statistics"></a>
</h3>
<p>Each <code>fasstr</code> function comes with their default statistics
to be calculated. While some cannot be changed (some plotting
functions), most have the ability to customize what is calculated. Look
up the default settings for each function in their documentation
(<code><a href="../reference/calc_longterm_daily_stats.html">?calc_longterm_daily_stats</a></code> for example).</p>
<p>By default, the basic summary statistics functions will calculate the
mean, median, maximum, and minimum values for each time period; these
will automatically be calculated can cannot be removed by an argument
option (can remove afterwards if necessary). These functions also
calculate default percentiles, which can be customized by changing the
desired percentiles by providing a numeric vector of numbers (between 0
and 100) to the <code>percentiles</code> argument.</p>
<p>This example shows the default percentiles for the
<code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function (10 and 90th percentiles):</p>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span></code></pre></div>
<p>This example shows custom percentiles for the
<code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function (5 and 25th percentiles):</p>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The following are some examples of how to customize results from
other types of functions. See function documentations for full argument
uses.</p>
<p>Example of calculating dates of the 10 and 20 percent of total annual
flow:</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                        start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                        end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                        percent_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Example of plotting the number of normal and above/below normal days
per year of the 10th and 90th percentiles (25th and 75th percentiles are
default):</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_normal_days.html">plot_annual_normal_days</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                        start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                        end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                        normal_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Normal_Days</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-101-1.png" width="672"></p>
<div class="section level4">
<h4 id="data-frame-options">Data frame options<a class="anchor" aria-label="anchor" href="#data-frame-options"></a>
</h4>
<p>An option when working with the functions that produce data frames is
to transpose the rows and columns of the data. Most functions by default
provide data results such there are columns of statistics for each
station and time period. See the example here:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                          end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span></code></pre></div>
<pre><code>   STATION_NUMBER     Month      Mean  Median Maximum Minimum    P10    P90
1         08NM116       Jan  1.201563  0.9650    9.50   0.160 0.5480  1.850
2         08NM116       Feb  1.146177  0.9675    4.41   0.140 0.4890  1.970
3         08NM116       Mar  1.818723  1.3800    9.86   0.380 0.7200  3.700
4         08NM116       Apr  8.333600  6.2250   37.90   0.505 1.5400 17.810
5         08NM116       May 23.585036 20.9000   74.40   3.830 9.3700 40.800
6         08NM116       Jun 21.291149 19.4000   84.50   0.450 6.0990 38.630
7         08NM116       Jul  6.421402  3.9400   54.50   0.332 1.0200 14.700
8         08NM116       Aug  2.114699  1.5700   13.30   0.427 0.7790  4.210
9         08NM116       Sep  2.206682  1.6200   14.60   0.364 0.7397  4.352
10        08NM116       Oct  2.100921  1.6500   15.20   0.267 0.8030  3.950
11        08NM116       Nov  2.024817  1.7100   11.70   0.260 0.5618  3.781
12        08NM116       Dec  1.313862  1.0800    7.30   0.342 0.5000  2.370
13        08NM116 Long-term  6.141736  1.8900   84.50   0.140 0.6850 19.300</code></pre>
<p>In some circumstances, however, it may be more convenient to wrangle
the data such that there are columns for stations (or groupings) and a
single column with all statistics, and then the values are placed in
columns for each respective time period. See the following example when
setting <code>transpose = TRUE</code>.</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                          start_year <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                          end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                          transpose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>  STATION_NUMBER Statistic      Jan      Feb      Mar     Apr      May      Jun
1        08NM116      Mean 1.201563 1.146177 1.818723  8.3336 23.58504 21.29115
2        08NM116    Median 0.965000 0.967500 1.380000  6.2250 20.90000 19.40000
3        08NM116   Maximum 9.500000 4.410000 9.860000 37.9000 74.40000 84.50000
4        08NM116   Minimum 0.160000 0.140000 0.380000  0.5050  3.83000  0.45000
5        08NM116       P10 0.548000 0.489000 0.720000  1.5400  9.37000  6.09900
6        08NM116       P90 1.850000 1.970000 3.700000 17.8100 40.80000 38.63000
        Jul       Aug       Sep       Oct       Nov      Dec Long.term
1  6.421402  2.114699  2.206682  2.100921  2.024817 1.313862  6.141736
2  3.940000  1.570000  1.620000  1.650000  1.710000 1.080000  1.890000
3 54.500000 13.300000 14.600000 15.200000 11.700000 7.300000 84.500000
4  0.332000  0.427000  0.364000  0.267000  0.260000 0.342000  0.140000
5  1.020000  0.779000  0.739700  0.803000  0.561800 0.500000  0.685000
6 14.700000  4.210000  4.352000  3.950000  3.781000 2.370000 19.299999</code></pre>
</div>
<div class="section level4">
<h4 id="plotting-options">Plotting options<a class="anchor" aria-label="anchor" href="#plotting-options"></a>
</h4>
<div class="section level5">
<h5 id="logarithmic-discharge-scale">Logarithmic discharge scale<a class="anchor" aria-label="anchor" href="#logarithmic-discharge-scale"></a>
</h5>
<p>Depending on the plotting function, discharge data will be plotted
using a linear or a logarithmic scale (depending on the scale of data).
This can be altered using the <code>log_discharge</code> argument. Here
is example of plotting with a linear scale (default
<code>log_discharge = FALSE</code>):</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>,</span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-106-1.png" width="672"></p>
<p>Set the discharge scale to be logarithmic
(<code>log_discharge = TRUE</code>):</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>,</span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  log_discharge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-107-1.png" width="672"></p>
</div>
<div class="section level5">
<h5 id="including-a-standard-title-on-the-plot">Including a standard title on the plot<a class="anchor" aria-label="anchor" href="#including-a-standard-title-on-the-plot"></a>
</h5>
<p>The logical <code>include_title</code> argument adds the station
number (or grouping identifier from the <code>groupings</code>
argument), and in some cases the statistics as well. The argument’s
default is <code>FALSE</code>.</p>
<p>Example of including a title when plotting
(<code>include_title = TRUE</code>):</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                  start_year <span class="op">=</span> <span class="fl">1980</span>,</span>
<span>                  end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                  include_title <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-108-1.png" width="672"></p>
<p>Example of including a title when plotting
<code>include_title = TRUE</code> where the statistic is also
displayed:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_monthly_stats.html">plot_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, </span>
<span>                   start_year <span class="op">=</span> <span class="fl">1980</span>,</span>
<span>                   end_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                   include_title <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-109-1.png" width="672"></p>
<p>Customizing a plot by using additional <code>ggplot2</code>
functions:</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the plot list and extract the plot using [[1]]</span></span>
<span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, start_year <span class="op">=</span> <span class="fl">1980</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Customize the plot with various `ggplot2` functions</span></span>
<span><span class="va">plot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1.5</span>, colour <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1900-03-01"</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1900-08-05"</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Mission Creek Annual Hydrograph"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Flow (cms)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-110-1.png" width="672"></p>
<hr>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="writing-tables-and-plots">9. Writing Tables and Plots<a class="anchor" aria-label="anchor" href="#writing-tables-and-plots"></a>
</h2>
<p>To support saving the <code>fasstr</code> tables and plots to a
directory, there are several functions included in this package. These
include the following:</p>
<ul>
<li>
<code><a href="../reference/write_flow_data.html">write_flow_data()</a></code> - write a streamflow data set as a
.xlsx, .xls, or .csv file</li>
<li>
<code><a href="../reference/write_results.html">write_results()</a></code> - write a data frame as a .xlsx, .xls,
or .csv file</li>
<li>
<code><a href="../reference/write_plots.html">write_plots()</a></code> - write plots from a list into a
directory or PDF document</li>
<li>
<code><a href="../reference/write_objects_list.html">write_objects_list()</a></code> - write all tables and plots
contained in a list</li>
</ul>
<div class="section level4">
<h4 id="writing-a-flow-data-set">Writing a flow data set<a class="anchor" aria-label="anchor" href="#writing-a-flow-data-set"></a>
</h4>
<p>To directly save a streamflow data set from HYDAT or your own custom
data frame onto your computer, you can use the
<code><a href="../reference/write_flow_data.html">write_flow_data()</a></code> function. By listing the
<code>station_number</code> or <code>data</code> data frame, the data
set will save a file into the working directory, unless otherwise
specified using the <code>file_name</code> argument. If using the
<code>station_number</code> argument and listing only one station
without listing a name with <code>file_name</code>, the name will
include the number and followed by “_daily_data.xlsx”; and if multiple
stations are listed the name will be “HYDAT_daily_data.xlsx”. When using
the <code>data</code> argument without listing a name with
<code>file_name</code> the default name will be
<code>fasstr_daily_data.xlsx</code>. To use another file type than
“xlsx” (options are “xlsx”, “xls”, or “csv”) provide a file name using
the <code>file_name</code> argument with the desired extension. Other
argument options for this function include:</p>
<ul>
<li>selecting for the start and end years or dates</li>
<li>choosing to use water years when selecting specific years</li>
<li>selecting whether or not to fill dates with missing data with NA’s
(logical <code>fill_missing</code> argument)</li>
<li>selecting the number of digits to round the flow values (numeric
<code>digits</code> argument)</li>
</ul>
<p>The following will write an “xlsx” file called
“08NM116_data_data.xlsx” into your working directory that includes all
daily flow data from that station in HYDAT:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_flow_data.html">write_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span></code></pre></div>
<p>The following is an example of possible customization:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_flow_data</span>(<span class="at">station_number =</span> <span class="st">"08NM116"</span>,</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_year =</span> <span class="dv">1960</span>,</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_year =</span> <span class="dv">1970</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill_missing =</span> <span class="cn">TRUE</span>,</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">file_name =</span> <span class="st">"mission_creek.csv"</span>)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="writing-a-data-frame">Writing a data frame<a class="anchor" aria-label="anchor" href="#writing-a-data-frame"></a>
</h4>
<p>While you can use the base R <code>write_csv()</code> or
<code>writexl</code> package functions to save your data, the package
provides a function with options to choose for file type and the
rounding of digits. To directly save a data frame onto your computer you
can use the <code><a href="../reference/write_results.html">write_results()</a></code> function. This function allows
you to decide on file extensions of “xlsx”, “xls”, or “csv” by including
it in the <code>file_name</code> argument when you name the file. This
function also allows you to round all numeric columns by selecting the
number of digits using the numeric <code>digits</code> argument.</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annual_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_results.html">write_results</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">annual_data</span>,</span>
<span>              digits <span class="op">=</span> <span class="fl">3</span>,</span>
<span>              file_name <span class="op">=</span> <span class="st">"mission_creek_annual_flows.xlsx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="writing-a-list-of-plots">Writing a list of plots<a class="anchor" aria-label="anchor" href="#writing-a-list-of-plots"></a>
</h4>
<p>As all plots produced with this package are contained within lists, a
function is provided to assist in saving a list of plots into either a
folder, where all plot files are named by the object names within the
list, or combined PDF document, using the <code><a href="../reference/write_plots.html">write_plots()</a></code>
function. The name of the folder or PDF document is provided using the
<code>folder_name</code> argument. If the folder does not exist, one
will be created. Options to customize output size with
<code>width</code>, <code>height</code>, <code>units</code> and
<code>dpi</code> arguments, as similar to those in
<code>ggplots2:ggsave()</code>, can also be used.</p>
<p>The following will save each annual plot as a “png” file in a folder
called “Annual Plots” in the working directory:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annual_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_plots.html">write_plots</a></span><span class="op">(</span>plots <span class="op">=</span> <span class="va">annual_data</span>,</span>
<span>            folder_name <span class="op">=</span> <span class="st">"Annual Plots"</span>,</span>
<span>            plot_filetype <span class="op">=</span> <span class="st">"png"</span><span class="op">)</span></span></code></pre></div>
<p>The following will save all annual plots as combined “pdf” document
called “Annual Plots” in the working directory with each plot on a
different page:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annual_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_plots.html">write_plots</a></span><span class="op">(</span>plots <span class="op">=</span> <span class="va">annual_data</span>,</span>
<span>            folder_name <span class="op">=</span> <span class="st">"Annual Plots"</span>,</span>
<span>            combined_pdf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you would prefer to save the plots using other functions, like the
<code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> function, the desired plot must subsetted
from the list first so the object provided the function is a plot object
and not a list. Individual plots can be subsetted from their lists using
either the dollar sign, $
(e.g. <code>one_plot &lt;- plots$plotname</code>), or double square
brackets, [ ] (e.g. <code>one_plot &lt;- plots[[plotname]]</code> or
<code>one_plot &lt;- plots[[1]]</code>).</p>
</div>
<div class="section level4">
<h4 id="writing-a-list-of-data-frames-and-plots">Writing a list of data frames and plots<a class="anchor" aria-label="anchor" href="#writing-a-list-of-data-frames-and-plots"></a>
</h4>
<p>As some objects produced with this package, mainly with the
<code>compute_*</code> functions, contain lists of both data frames and
<code>ggplot2</code> objects, a function is provided, called
<code><a href="../reference/write_objects_list.html">write_objects_list()</a></code>, to assist in saving all objects
within the list into a designated directory folder, where all table and
plot files are named by the object names. The name of the folder is
provided using the <code>folder_name</code> argument. If the folder does
not exist, one will be created. The file type for tables and plots are
chosen using the <code>table_filetype</code> and
<code>plot_filetype</code> arguments respectively. There are also
options to customize plot output size with <code>width</code>,
<code>height</code>, <code>units</code> and <code>dpi</code> arguments,
as similar to those in <code>ggplots2:ggsave()</code> can also be
used.</p>
<p>The following will save all plots and tables in a folder called
“Frequency Analysis” in the working directory:</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">freq_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_annual_frequencies.html">compute_annual_frequencies</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_objects_list.html">write_objects_list</a></span><span class="op">(</span>list <span class="op">=</span> <span class="va">freq_analysis</span>,</span>
<span>                   folder_name <span class="op">=</span> <span class="st">"Frequency Analysis"</span>,</span>
<span>                   plot_filetype <span class="op">=</span> <span class="st">"png"</span>,</span>
<span>                   table_filetype <span class="op">=</span> <span class="st">"xlsx"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jon Goetz, Carl James Schwarz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
